<!-- build time:Mon Feb 10 2025 22:46:08 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><script src="http://echarts.baidu.com/dist/echarts.common.min.js"></script><script src="https://cdn.jsdelivr.net/npm/echarts@4.7.0/dist/echarts.min.js"></script><script src="https://cdn.jsdelivr.net/npm/echarts@4.7.0/map/js/china.min.js"></script><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="yandex-verification" content="fadb7324b0f3dbe2"><link rel="alternate" type="application/rss+xml" title="我在人间贩卖黄昏，只为收集世间温柔遇见你." href="https://flechazoclf.github.io/FlechazoCLF.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="我在人间贩卖黄昏，只为收集世间温柔遇见你." href="https://flechazoclf.github.io/FlechazoCLF.github.io/atom.xml"><link rel="alternate" type="application/json" title="我在人间贩卖黄昏，只为收集世间温柔遇见你." href="https://flechazoclf.github.io/FlechazoCLF.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="AUTOSAR,嵌入式,软件开发"><link rel="canonical" href="https://flechazoclf.github.io/FlechazoCLF.github.io/archives/e0c2534f.html"><title>小柴带你学AutoSar系列三、标准和规范篇（5）CommunicationManagement - AUTOSAR - 技术教程🎃 | flechazo = 我在人间贩卖黄昏，只为收集世间温柔遇见你. = 有幸来到人间的旅人</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope="" itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">小柴带你学AutoSar系列三、标准和规范篇（5）CommunicationManagement</h1><div class="meta"><span class="item" title="创建时间：2024-05-03 00:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2024-05-03T00:00:00+08:00">2024-05-03</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">flechazo</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="/archives/e0c2534f.html../../../wallpaper/7.png"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope="" itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem"><a href="/categories/technique/" itemprop="item" rel="index" title="分类于 技术教程🎃"><span itemprop="name">技术教程🎃</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem"><a href="/categories/technique/AUTOSAR/" itemprop="item" rel="index" title="分类于 AUTOSAR"><span itemprop="name">AUTOSAR</span></a><meta itemprop="position" content="2"></span></div><article itemscope="" itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://flechazoclf.github.io/FlechazoCLF.github.io/archives/e0c2534f.html"><span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="flechazo"><meta itemprop="description" content="有幸来到人间的旅人, 我在人间贩卖星光"></span><span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="我在人间贩卖黄昏，只为收集世间温柔遇见你."></span><div class="body md" itemprop="articleBody"><p></p><div class="links"><div class="item" title="【知乎】flechazo" style="--block-color:#21d4fd"><span class="exturl image" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9qaXVfc2hlbmc=" data-background-image="https://foruda.gitee.com/avatar/1680342439464493317/9010997_flechazo5201314_1680342439.png!avatar200"></span><div class="info"><span class="exturl title" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9qaXVfc2hlbmc=">【知乎】flechazo</span><p class="desc">https://www.zhihu.com/people/jiu_sheng</p></div></div></div><p></p><p></p><div class="links"><div class="item" title="【CSDN】小柴带你学AutoSar总目录" style="--block-color:#21d4fd"><span class="exturl image" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FpYW5zaGFuZzUyMDEzL2FydGljbGUvZGV0YWlscy8xMzgxNDAyMzU/c3BtPTEwMDEuMjAxNC4zMDAxLjU1MDE=" data-background-image="https://foruda.gitee.com/avatar/1680342439464493317/9010997_flechazo5201314_1680342439.png!avatar200"></span><div class="info"><span class="exturl title" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FpYW5zaGFuZzUyMDEzL2FydGljbGUvZGV0YWlscy8xMzgxNDAyMzU/c3BtPTEwMDEuMjAxNC4zMDAxLjU1MDE=">【CSDN】小柴带你学AutoSar总目录</span><p class="desc">https://blog.csdn.net/qianshang52013/article/details/138140235?spm=1001.2014.3001.5501</p></div></div></div><p></p><p>Autosar 系列教程：<span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3M/X19iaXo9TXpBeE9ETTJOVFEwTnc9PSZhbXA7bWlkPTIyNDc0OTIzMjYmYW1wO2lkeD0xJmFtcDtzbj1kNDdhYWM4YTE4MWJkZjM0NGNmMzJhOThmNzAxMjkyNyZhbXA7Y2hrc209OWJkNWNmOGVhY2EyNDY5ODgyMzcxZTEyOTY5Yzc3NzdiMDY1NGRiMGE3MDVlNWE1ZDNkZGFmNjRjODk5ZjhmYzUyYmRhNTM4MzczMiZhbXA7cGF5cmVhZHRpY2tldD1IQjBaZE1Tc3RNVmVRVXF2RkdBb2E1U2Q3Mnk2bzJOb192OF9PLUhsaXRxMHBaOWcxVzFablBrbmwwQmJySGZZajcxeUtkZyNyZA==">小柴带你学 AutoSar 总目录</span></p><h1 id="小柴带你学autosar系列三-标准和规范篇5communicationmanagement"><a class="anchor" href="#小柴带你学autosar系列三-标准和规范篇5communicationmanagement">#</a> 小柴带你学 AutoSar 系列三、标准和规范篇（5）CommunicationManagement</h1><hr><h1 id="一-networkmanagement"><a class="anchor" href="#一-networkmanagement">#</a> 一、NetworkManagement</h1><h1 id="1-scope-of-document"><a class="anchor" href="#1-scope-of-document">#</a> <strong>1 Scope of Document</strong></h1><blockquote><p>This document specifies requirements on the AUTOSAR Network Management.</p></blockquote><p>本文档指定了对 AUTOSAR 网络管理的要求。</p><blockquote><p>The requirements apply on following functional entities:</p><ul><li>Network Management coordinating a particular Nm-cluster.</li><li>Network Management bus specifics for a particular bus.</li><li>Gateway and Interoperability of Network Management between Nm-clusters.</li></ul></blockquote><p>这些要求适用于下列职能实体:</p><ul><li>网络管理，协调特定的 Nm 集群。</li><li>特定总线的网络管理总线具体信息。</li><li>网关与 Nm 集群间网络管理的互操作性。</li></ul><blockquote><p>The communication system where Nm is applicable has to support a “bus sleep” mode. That means that the transceiver of the communication system can switch to a low power mode and can be switched again to full power mode by (specific) bus traffic and/or application.</p></blockquote><p>Nm 适用的通信系统必须支持 “总线睡眠” 模式，这意味着通信系统的收发器可以切换成低功率模式，并且可以通过 (特定的) 总线通信和 / 或应用程序再次切换成全功率模式。</p><h1 id="4-use-cases"><a class="anchor" href="#4-use-cases">#</a> <strong>4 Use Cases</strong></h1><p><img data-src="../../../img.assets/24-11-04%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%B0%8F%E6%9F%B4%E5%B8%A6%E4%BD%A0%E5%AD%A6%E4%B9%A0AutoSar%E7%B3%BB%E5%88%97%E4%B8%89%E3%80%81%E6%A0%87%E5%87%86%E5%92%8C%E8%A7%84%E8%8C%83%E7%AF%87%EF%BC%885%EF%BC%89CommunicationManagement/image-20241104205912292.png" alt="image-20241104205912292"></p><table><thead><tr><th><strong>ID</strong></th><th><strong>Name</strong></th><th><strong>Description</strong></th><th>描述</th></tr></thead><tbody><tr><td>0001</td><td>Synchronous Shutdown</td><td>If there is no communication need in a Nm cluster, the Nm protocol ensures that all Nm nodes synchronously enter sleep mode.</td><td>如果 Nm 集群中没有通信需求，Nm 协议可以确保所有 Nm 节点同步进入休眠模式。</td></tr><tr><td>0002</td><td>Sub-networks Synchronous Shutdown</td><td>Support the coordinated shutdown of multiple sub-networks. This can be considered as an extension of the synchronous shutdown use case with the objective of synchronously shutting down multiple Nm clusters.</td><td>支持多个子网络的协调关闭。这可以被认为是同步关闭用例的扩展，其目的是同步关闭多个 Nm 集群。</td></tr><tr><td>0003</td><td>Keep Nm Cluster Awake</td><td>If at least one Nm node in a Nm cluster needs communication, the Nm protocol ensures that all required Nm nodes remain awake.</td><td>如果 Nm 集群中至少有一个 Nm 节点需要通信，Nm 协议确保所有所需的 Nm 节点保持清醒。</td></tr><tr><td>0004</td><td>Partial Network</td><td>Support of partial network by defining communication/function domains to allow for turning off network communication across multiple ECUs in case their provided functions are not required under certain conditions. Other ECUs can continue to communicate on the same bus channels. Additionally use Nm messages to communicate the request/release information of a partial network cluster between the participating ECUs.</td><td>通过定义部分网络来支持通信 / 功能域，以便在特定条件下不需要某些 ECU 提供的功能时关闭跨多个 ECU 的网络通信。其他 ECU 可以在相同的总线通道上继续通信。此外，使用 Nm 消息在参与 ECU 之间通信部分网络簇的请求 / 释放信息。</td></tr><tr><td>0005</td><td>Passive Mode</td><td>Nm node configured as Passive node is not able to initiate a start-up of a Nm cluster, however is able to be woken up if any other node initiates a start up. This eliminates unnecessary communication and reduces bus and buffer overhead. Allowing shutdown to be controlled by a subset of the cluster’s nodes enables the possibility that only fault tolerant nodes control shutdown.</td><td>配置为被动节点的 Nm 节点无法启动 Nm 集群的启动，但如果任何其他节点启动启动，则能够被唤醒。这消除了不必要的通信并减少了总线和缓冲区开销。允许由集群的节点子集控制关闭，使得只有容错节点控制关闭成为可能。</td></tr><tr><td>0006</td><td>Partial Network Gateway</td><td>Since partial networks span over multiple buses, the network management protocol defines how the partial network information shall be gateway-ed between these buses, i.e. it shall be possible to forward request/release information to sub-networks thereby allowing gateway ECUs to act “on-behalf“ of the original partial network requestor ECU.</td><td>由于部分网络跨越多个总线，网络管理协议定义了如何将部分网络信息在这些总线之间进行网关传输，即可以将请求 / 释放信息转发到子网络，从而允许网关 ECU “代表” 原始部分网络请求者 ECU 进行操作。</td></tr><tr><td>0007</td><td>FlexRay Nm</td><td>Support the specific characteristics of the FlexRay bus and its HW Nm vector support. The network management protocol shall support alternatives for the FlexRay bus where the Network Management Vector of the FlexRay protocol specification can be used.</td><td>支持 FlexRay 总线及其 HW Nm 向量的具体特性。网络管理协议应支持 FlexRay 协议规范的网络管理向量可用于 FlexRay 总线的替代方案。</td></tr></tbody></table><h1 id="5-requirements-specification"><a class="anchor" href="#5-requirements-specification">#</a> <strong>5 Requirements Specification</strong></h1><h2 id="51-functional-requirements"><a class="anchor" href="#51-functional-requirements">#</a> <strong>5.1</strong> <strong>Functional Requirements</strong></h2><h3 id="511-configuration"><a class="anchor" href="#511-configuration">#</a> <strong>5.1.1</strong> <strong>Configuration</strong></h3><blockquote><p><strong>[RS_Nm_00150] Specific features of the Network Management shall be configurable</strong></p><p>The following features of the Network Management shall be configurable:</p><ul><li>Detection of present nodes – [RS_Nm_00153]</li><li>Notification that all other ECUs are (no more) ready to sleep (i.e. Remote Sleep Indication (Cancellation)) – [RS_Nm_00052], [RS_Nm_02509]</li><li>Nm Coordination support – [RS_Nm_02514]</li><li>User data support – [RS_Nm_02503], [RS_Nm_02504]</li><li>Bus load reduction – [RS_Nm_00142]</li><li>Sending node identifier – [RS_Nm_02505]</li><li>Receiving node identifier – [RS_Nm_02506]</li><li>Immediate Transmission Confirmation</li><li>Configurable Role In Cluster Shutdown – [RS_Nm_02511]</li><li>Bus Keep Awake Services – [RS_Nm_00047]</li><li>Partial Networking extensions – [RS_Nm_02517]</li><li>Dynamic PNC Mapping – [RS_Nm_02547]</li><li>Synchronized PNC shutdown – [RS_Nm_02548]</li></ul></blockquote><p>这些是可配置的：</p><ul><li>检测当前节点 -[RS_Nm_00153]</li><li>通知所有其他 ECU 已 (不再) 准备好进入睡眠状态 (即远程睡眠指示 (取消))-[RS_Nm00052]，[RS_Nm_02509]</li><li>Nm 协调支持 -[RS_Nm02514]</li><li>用户数据支持 -[RS_Nm_02503]，[RS_Nm_02504]</li><li>总线负载减少 -[RSNm00142]</li><li>发送节点标识符 -[RSNm02505]</li><li>接收节点标识符 -[RS_Nm_02506]</li><li>即时传输确认</li><li>集群关闭中的可配置角色 -[RS_Nm_02511]</li><li>总线保持唤醒服务 -[RS_Nm_00047]</li><li>部分网络扩展 -[RSNm 02517]</li><li>动态 PNC 映射 -[RS Nm 02547]</li><li>同步 PNC 关机 -[RS_Nm_02548]</li></ul><h3 id="512-initialization"><a class="anchor" href="#512-initialization">#</a> <strong>5.1.2</strong> <strong>Initialization</strong></h3><blockquote><p><strong>[RS_Nm_00151] The Network Management algorithm shall allow any node to integrate into an already running Nm cluster</strong></p></blockquote><p>网络管理算法应允许任何节点集成到已经运行的 Nm 集群中</p><blockquote><p>Integration of</p><p>a) Late nodes</p><p>b) nodes that have recovered from fault state</p><p>c) nodes that have been connected to a running vehicle network (e.g. by service)</p></blockquote><blockquote><p><strong>[RS_Nm_00043] Nm shall not prohibit bus traffic with Nm not being initialized</strong></p></blockquote><p>不管有没有初始化都要允许总线通信</p><h3 id="513-normal-operation"><a class="anchor" href="#513-normal-operation">#</a> <strong>5.1.3</strong> <strong>Normal Operation</strong></h3><blockquote><p><strong>[RS_Nm_00044] The Nm shall be applicable to different types of communication systems which are in the scope of AUTOSAR and support a bus sleep mode.</strong></p><p>Network management mechanisms for each supported protocol shall be realized using a limited number of predefined Nm states and Nm transitions. The events triggering the transitions between states and the actions taken on these transitions may be protocol specific. A bus sleep mode shall be supported for each protocol. Nm shall be executable on asynchronous communication systems (e.g. CAN) as well as on synchronous communication systems (e.g. FlexRay), and also on any other types of communication systems which are in the scope of AUTOSAR</p></blockquote><p>每个受支持协议的网络管理机制应使用有限数量的预定义 Nm 状态和 Nm 转换来实现。触发状态之间转换的事件以及对这些转换执行的操作可能是特定于协议的。每个协议都应支持总线休眠模式。Nm 应在异步通信系统（例如 CAN）和同步通信系统（例如 FlexRay）以及 AUTOSAR 范围内的任何其他类型的通信系统上执行</p><blockquote><p><strong>[RS_Nm_02515] Nm shall offer a generic possibility to run other Nms than the AUTOSAR-Nms</strong></p></blockquote><p>就是搞一些接口</p><blockquote><p><strong>[RS_Nm_00045] Nm shall provide services to coordinate shutdown of Nmclusters independently of each other</strong></p></blockquote><p>Nm 应提供服务以协调彼此独立的 Nm clusters NM 集群的关闭</p><blockquote><p>In today’s cars, multiple different communication systems are implemented.</p></blockquote><p>在当今的汽车中，实施了多种不同的通信系统。</p><blockquote><p>Therefore, ECUs might be connected to multiple communication channels (e.g. 2 CAN clusters, 1 FlexRay cluster, etc.).</p></blockquote><p>因此，ECU 可能连接到多个通信通道（例如 2 个 CAN 集群、1 个 FlexRay 集群等）。</p><blockquote><p>Not in all cases all channels have to be in full power mode. Because of that, each channel has to be able to be started up or shut down separately.</p></blockquote><p>并非在所有情况下，所有通道都必须处于全功率模式。因此，每个通道都必须能够单独启动或关闭。</p><blockquote><p><strong>[RS_Nm_02513] Nm shall provide functionality which enables upper layers to control the sleep mode.</strong></p></blockquote><p>给上层提供接口来控制睡眠 / 唤醒</p><blockquote><p><strong>[RS_Nm_00046] It shall be possible to trigger the startup of all Nodes at any Point in Time</strong></p></blockquote><p>任何时间点都可以触发所有节点的启动</p><blockquote><p>At a specific point in time all nodes connected to Nm-cluster have to be started-up (e.g. if the car is started). Because of that Nm has to provide services to start up Nm of all nodes connected to a Nm-cluster at any point in time.</p></blockquote><p>在特定时间点，所有连接到 Nm-cluster 的节点都必须启动（例如，如果汽车已启动）。因此，Nm 必须提供服务以在任何时间点启动连接到 Nm 集群的所有节点的 Nm。</p><blockquote><p>The point in time can not be calculated offline, therefore this service has to be accessible at any time.</p><p>Note regarding FlexRay networks: Under certain circumstances, a shutdown may be required before a startup can occur. In this situation substantial delays may occur.</p></blockquote><p>时间点无法离线计算，因此必须随时访问此服务。</p><p>关于 FlexRay 网络的注意事项：在某些情况下，可能需要先关闭才能启动。在这种情况下，可能会出现重大延误。</p><blockquote><p>All nodes means all nodes connected to clamp 30 (nodes permanently connected to power supply). ECUs connected to clamp 15 (nodes power supplied through some power relay) have to be treated separately, due to the fact that they cannot be started-up at any point in time.</p></blockquote><p>所有节点是指连接到 clamp 30 的所有节点（永久连接到电源的节点）。</p><p>连接到 clamp 15 的 ECU （节点通过某个功率继电器供电） 必须单独处理，因为它们无法在任意时间点启动。</p><blockquote><p>Note: "Passive Nodes" are not able to initiate a start-up of a Nm-cluster, but they are able to be woken up if any other node initiates a start-up. Please refer [RS_Nm_02511]</p></blockquote><p>注意：“被动节点” 无法启动 Nm 集群，但如果任何其他节点启动启动，它们可以被唤醒。请参考 [RS_Nm_02511]</p><blockquote><p><strong>[RS_Nm_00047] Nm shall provide a service to request to keep the bus awake and a service to cancel this request.</strong></p></blockquote><p>Nm 应提供请求保持总线唤醒的服务，并提供取消此请求的服务。</p><blockquote><p><strong>[RS_Nm_00048] Nm shall put the communication controller into sleep mode if there is no bus communication</strong></p></blockquote><p>如果没有总线通信，Nm 应将通信控制器置于睡眠模式</p><blockquote><p><strong>[RS_Nm_00050] The Nm shall provide the current state of Nm</strong></p></blockquote><p>应用程序应能够通过访问 Nm 的特定接口来获取 Nm 状态信息。Nm 状态反映了总线的状态。</p><blockquote><p><strong>[RS_Nm_00051] Nm shall inform application when Nm state changes occur.</strong></p></blockquote><p>Nm 应提供一个接口，应用程序可以使用该接口在发生特定 Nm 状态更改时获得通知。</p><blockquote><p><strong>[RS_Nm_00052] The Nm interface shall signal to the application that all other ECUs are ready to sleep.</strong></p></blockquote><p>Nm 接口应向应用程序发出信号，表明所有其他 ECU 都已准备好休眠。</p><blockquote><p><strong>[RS_Nm_02509] The Nm interface shall signal to the application that at least one ECU is not ready to sleep anymore.</strong></p></blockquote><p>Nm 接口应向应用程序发出信号，表明至少有一个 ECU 没准备好休眠。</p><blockquote><p><strong>[RS_Nm_02503] The Nm API shall optionally give the possibility to send user data</strong></p><p><strong>[RS_Nm_02504] The Nm API shall optionally give the possibility to get user data</strong></p></blockquote><p>Nm API 可以选择设置可以附加到总线上发送 / 获取的每条 Nm 消息的用户数据。Nm 应保证写入 / 读取操作的数据一致性。</p><blockquote><p><strong>[RS_Nm_00153] The Network Management shall optionally provide a possibility to detect present nodes</strong></p></blockquote><p>网络管理应选择性地提供检测当前节点的可能性</p><blockquote><p>Rationale: For diagnostics purposes and configuration checks.</p></blockquote><p>基本原理：用于诊断和配置检查。</p><blockquote><p><strong>[RS_Nm_02508] Every node shall have a node identifier associated with it that is unique in the Nm-cluster.</strong></p></blockquote><p>每个节点都应具有与之关联的节点标识符，该标识符在 Nm 集群中是唯一的。</p><blockquote><p><strong>[RS_Nm_02505] The Nm shall optionally set the local node identifier to the Nmmessage</strong></p></blockquote><p>Nm 可以选择性地将本地节点标识符设置为 Nm 消息</p><blockquote><p><strong>[RS_Nm_02506] The Nm API shall give the possibility to read the source node identifier of the sender</strong></p></blockquote><p>Nm API 将提供从最近收到的 Nm 消息中读取发送者的源节点标识符的可能性。</p><blockquote><p><strong>[RS_Nm_02511] It shall be possible to configure the Network Management of a node so that it does not contribute to the cluster shutdown decision.</strong></p></blockquote><p>应该可以配置节点的 Network Management，使其不会影响集群关闭决策。</p><blockquote><p>Specifically, it shall be possible to configure some nodes of a cluster so that they are not able to broadcast the information used by other nodes to trigger shutdown, i.e., they have no Nm-related communication defined for the node.</p></blockquote><p>具体来说，应该可以配置集群的某些节点，以便它们无法广播其他节点用于触发关闭的信息，即，它们没有为节点定义与 Nm 相关的通信。</p><blockquote><p>Such nodes shall not be capable of keeping the bus awake, but they are required to shut down in a manner consistent with the others. See also [RS_Nm_00150].</p></blockquote><p>此类节点不能使 bus 保持唤醒状态，但需要以与其他节点一致的方式关闭。另见 [RS_Nm_00150]。</p><blockquote><p><strong>[RS_Nm_02536] Nm shall provide functionality to start-up without requesting the network.</strong></p></blockquote><p>Nm 应在不请求网络的情况下提供启动功能。</p><blockquote><p>A node has to participate to the network management without actively requesting communication.</p></blockquote><p>节点必须参与网络管理，而无需主动请求通信。</p><blockquote><p><strong>[RS_Nm_02512] The Nm shall give the possibility to enable or disable the network management related communication configured for an active Nm node</strong></p></blockquote><p>Nm 可以启用或禁用为活动 Nm 节点配置的网络管理相关通信 Conformance to ISO 14229 CommunicationControl (28 hex) service</p><blockquote><p><strong>[RS_Nm_02573] Nm shall handle retransmission of NM-PDUs</strong></p></blockquote><p>&lt;Bus&gt;Nm 负责处理 NM-PDU 的重传</p><blockquote><p>&lt;Bus&gt;Nm has to perform a retry transmission handling for NM-PDU in the context of the main function calls, if transmission of this NM-PDU was not accepted or not confirmed by the lower layer</p></blockquote><p>&lt;Bus&gt; 如果此 NM-PDU 的传输未被下层接受或未确认，则 Nm 必须在主函数调用的上下文中对 NM-PDU 执行重试传输处理</p><h3 id="514-fault-operation"><a class="anchor" href="#514-fault-operation">#</a> <strong>5.1.4</strong> <strong>Fault Operation</strong></h3><blockquote><p><strong>[RS_Nm_00137] Nm shall perform communication system error handling for errors that have impact on the Nm behavior.</strong></p></blockquote><p>Nm 应对影响 Nm 行为的错误执行通信系统错误处理。</p><blockquote><p>Focus: bus errors, not protocol errors.</p><p>Example: loss of Nm message is handled.</p></blockquote><p>重点：总线错误，而不是协议错误。</p><p>示例：处理 Nm 消息的丢失。</p><h3 id="515-nm-coordination"><a class="anchor" href="#515-nm-coordination">#</a> <strong>5.1.5</strong> <strong>Nm Coordination</strong></h3><blockquote><p><strong>[RS_Nm_02514] It shall be possible to group networks into Nm Coordination Clusters</strong></p></blockquote><p>应该可以将网络分组到 Nm 协调集群中</p><blockquote><p>It shall be possible to group networks into Nm Coordination Clusters. Each bus specific Nm shall, by configuration, be part of 0 or 1 Nm Coordination Cluster.</p></blockquote><p>应该可以将网络分组到 Nm 协调集群中。根据配置，每个总线特定的 Nm 应是 0 或 1 Nm 协调集群的一部分。</p><blockquote><p>Nm shall provide functionality (Nm Coordination) to coordinate the different Nm modes (especially sleep and keep awake) on all networks in an Nm Coordination Cluster, by performing a synchronized shutdown on all included networks.</p></blockquote><p>Nm 应提供功能（Nm 协调），通过在包含的所有网络上执行同步关闭来协调 Nm 协调集群中所有网络上的不同 Nm 模式（尤其是睡眠和保持唤醒）。</p><blockquote><p>The level of synchronization is determined by the configuration of the shutdown synchronization algorithm. Specifically, it shall be possible to perform Nm Coordination for each Nm Coordination Cluster separately and independently.</p></blockquote><p>同步级别由 shutdown 同步算法的配置决定。具体来说，应该可以单独和独立地为每个 Nm 协调集群执行 Nm 协调。</p><blockquote><p>It shall be possible to perform coordinated and/or synchronized shutdown of multiple Nm clusters independently.</p></blockquote><p>应该可以独立执行多个 Nm 集群的协调和 / 或同步关闭。</p><blockquote><p><strong>[RS_Nm_02516] All AUTOSAR Nm instances shall support the Nm Coordinator functionality including Bus synchronization on demand</strong></p></blockquote><p>所有 AUTOSAR Nm 实例都应支持 Nm 协调器功能，包括按需总线同步</p><blockquote><p>Bus Synchronization on demand allows for synchronization of an Nm-cluster at an arbitrary point in time, meaning the Nm-Timeout Timers in all nodes of the Nm-cluster are restarted simultaneously.</p></blockquote><p>按需总线同步允许在任意时间点同步 Nm 集群，这意味着 Nm 集群所有节点中的 Nm-Timeout 计时器会同时重新启动。</p><blockquote><p><strong>[RS_Nm_02535] The Nm coordination shall support the coordination of nested sub-buses</strong></p></blockquote><p>Nm 协调应支持嵌套子总线的协调</p><blockquote><p><strong>[RS_Nm_02537] The Nm Coordinator shall be able to abort the coordinated shutdown</strong></p></blockquote><p>Nm 协调器应能够中止协调关闭</p><blockquote><p>As long as the coordinated shutdown is not completed, a network request on one of the coordinated buses shall be forwarded to other buses of this Coordination cluster.</p></blockquote><p>只要协调关闭未完成，其中一条协调总线上的网络请求就应转发到此协调集群的其他总线。</p><h3 id="516-partial-networking"><a class="anchor" href="#516-partial-networking">#</a> <strong>5.1.6</strong> <strong>Partial Networking</strong></h3><blockquote><p><strong><span draft="">RS_Nm_02549</span> Nm shall offer interfaces to Request and indicate Repeat Message Request (optional)</strong></p></blockquote><p>Nm 应提供 Request 接口并指示 Repeat Message Request（可选</p><blockquote><p>One bit in the Nm Control Bit Vector shall be used to propagate the need for receiving nodes to enter NmRepeatMessage state.</p></blockquote><p>Nm Control Bit Vector 中的一位用于传播接收节点进入 NmRepeatMessage 状态的需求。</p><blockquote><p>There shall be an interface to set the value of this bit in the Nm and the Repeat Message Request bit and one to indicate the change of this bit during reception. This feature shall be statically configurable (available or not).</p></blockquote><p>应有一个接口用于设置 Nm 中该位的值 &lt;Bus&gt; 和 Repeat Message Request 位，还有一个接口用于指示接收过程中该位的变化。此功能应是静态可配置的（可用或不可用）。</p><blockquote><p><strong>[RS_Nm_02517] CanNm shall support Partial Networking on CAN</strong></p><p><strong>[RS_Nm_02550] FrNm shall support Partial Networking on FlexRay</strong></p></blockquote><p>CanNm 应支持 CAN 上的部分联网</p><p>FrNm 应在 FlexRay 上支持 Partial Networking</p><blockquote><p>The power consumption can be reduced by e.g</p><ul><li>Shutting down of seat control functions</li><li>Shutting down of park assistant functions</li><li>Hazard flashers</li><li>Shutting down of Electric Park Brake (EPB)</li></ul></blockquote><p>可以通过以下方式降低功耗： 例如：</p><ul><li>关闭座椅控制功能</li><li>关闭驻车辅助功能</li><li>危险闪光器</li><li>关闭电动驻车制动器 （EPB）</li></ul><blockquote><p><strong>[RS_Nm_02546] UdpNm shall support Partial Networking on Ethernet</strong></p></blockquote><p>UdpNm 一样的</p><blockquote><p><strong>[RS_Nm_02519] The Nm Control Bit Vector shall contain a PNI (Partial Network Information) bit.</strong></p></blockquote><p>Nm 控制位向量应包含一个 PNI （部分网络信息） 位。</p><blockquote><p>0: Nm message does not contain PN request information</p><p>1: Nm message contains PN request information (PNI)</p></blockquote><p>0：Nm 消息不包含 PN 请求信息</p><p>1：Nm 消息包含 PN 请求信息 （PNI）</p><blockquote><p><strong>[RS_Nm_02527] Nm shall implement a filter algorithm dropping all Nm messages that are not relevant for the ECU</strong></p></blockquote><p>Nm 应实施过滤算法，删除所有与 ECU 无关的 Nm 消息</p><blockquote><p><strong>[RS_Nm_02528] Nm shall provide a service which allows for instantaneous sending of Nm messages.</strong></p></blockquote><p>Nm 应提供允许即时发送 Nm 消息的服务。</p><blockquote><p>A PN request originating from the ECU needs to be sent out as fast as possible to avoid long latency</p></blockquote><p>源自 ECU 的 PN 请求需要尽快发出，以避免长时间延迟</p><blockquote><p><strong><span draft="">RS_Nm_02547</span> Nm shall be able to propagate and evaluate the need for Partial Networking Learning (optional)</strong></p></blockquote><p>{草稿}&lt;Bus&gt;Nm 应能够传播和评估部分网络学习的需求（可选）</p><blockquote><p>One bit in the Nm Control Bit Vector shall be used to propagate the need for Partial Networking Learning.</p></blockquote><p>Nm Control Bit Vector 中的一位应用于传播对 Partial Networking Learning 的需求。</p><blockquote><p>There shall be an interface to set the value of this bit in the &lt;Bus&gt;Nm and the Repeat Message Request bit and one to indicate the change of this bit during reception.</p></blockquote><p>应有一个接口用于设置 Nm 中该位的值 &lt;Bus&gt; 和 Repeat Message Request 位，还有一个接口用于指示接收过程中该位的变化。</p><blockquote><p>This feature shall be statically configurable (available or not) (see [RS_Nm_00150])</p></blockquote><p>此功能应是静态可配置的（无论是否可用）（参见 [RS_Nm_00150]）</p><blockquote><p>Partial Network learning differs between:</p><ul><li>request Nm PDU, where the bit for partial networking learning and Repeat Message Request bit are both set,</li><li>response Nm PDU, where only the bit for partial networking learning is set (but Repeat Message Request bit stays unset).</li></ul></blockquote><p>部分网络学习在以下方面有所不同：</p><ul><li>请求 Nm PDU，其中部分网络学习的位和重复消息请求位都设置了，</li><li>响应 Nm PDU，其中仅设置了部分网络学习的位（但重复消息请求位保持未设置）。</li></ul><blockquote><p><strong><span draft="">RS_Nm_02548</span> Nm shall be able to propagate and evaluate the need for synchronized PNC shutdown in the role of a top-level PNC coordinator or intermediate PNC coordinator (optional)</strong></p></blockquote><p>{草稿}&lt;Bus&gt;Nm 应能够传播和评估作为顶级 PNC 协调器或中间 PNC 协调器（可选）的角色需要同步 PNC 关闭</p><blockquote><p>One bit in the Nm Control Bit Vector shall be used to propagate the synchronized PNC shutdown.</p></blockquote><p>Nm Control Bit Vector 中的一位应用于传播同步 PNC 关断。</p><blockquote><p>There shall be an interface to set the value of this bit in the Nm and one to indicate the set bit during reception. This feature shall be statically configurable (available or not)(see [RS_Nm_00150]).</p></blockquote><p>应有一个接口用于设置 Nm 中该位的值 &lt;Bus&gt;，还有一个接口用于指示接收过程中的设置位。此功能应是静态可配置的（可用或不可用）（参见 [RS_Nm_00150]）。</p><blockquote><p><strong><span draft="">RS_Nm_02540</span> The Nm Control Bit Vector shall contain a PN shutdown request bit.</strong></p></blockquote><p>Nm 控制位向量应包含一个 PN 关断请求位。</p><blockquote><p>The Nm Control Bit Vector shall contain a PN shutdown request bit with the following meaning:</p><ul><li>0: Nm message does not contain synchronized Partial Network shutdown request</li><li>1: Nm message does contain synchronized Partial Network shutdown request for at least one PNC</li></ul></blockquote><p>Nm 控制位向量应包含具有以下含义的 PN 关机请求位：</p><ul><li>0：Nm 消息不包含同步的部分网络关机请求</li><li>1：Nm 消息包含至少一个 PNC 的同步部分网络关机请求</li></ul><blockquote><p>This bit is used to indicate that a top-level PNC coordinator release at least one PNC. This bit is evaluated only by an intermediate PNC coordinator. A PNC leaf node ignore this bit.</p></blockquote><p>此位用于指示顶级 PNC 协调器释放至少一个 PNC。此位仅由中间 PNC 协调器评估。PNC 叶节点忽略此位。</p><blockquote><p>Use Case: Synchronized PNC shutdown of the PNC within the network</p></blockquote><p>用例：网络内 PNC 的同步 PNC 关闭</p><blockquote><p><span draft="">RS_Nm_02542</span> The &lt;Bus&gt;Nm of the top-level PNC coordinator shall set the PN shutdown request bit if a least one PNC is released</p></blockquote><p>{草稿}&lt;Bus &gt; 如果至少释放了一个 PNC，则顶级 PNC 协调器的 Nm 应设置 PN 关闭请求位</p><blockquote><p>The &lt;Bus&gt;Nm of a top-level PNC coordinator shall transmit a PN shutdown message if at least one PNC was released.</p></blockquote><p>&lt;Bus&gt; 如果至少释放了一个 PNC，则顶级 PNC 协调器的 Nm 应发送 PN 关闭消息。</p><blockquote><p>A PN shutdown message set the PN shutdown request bit and the PNC bit of the released PNCs to 1.</p></blockquote><p>PN shutdown 消息将 PN shutdown 请求位和释放的 PNC 的 PNC 位设置为 1。</p><blockquote><p>Thus, only the released PNCs are considered in the PN shutdown message. The remaining PNC bits are set to 0.</p></blockquote><p>因此，PN 关闭消息中仅考虑已释放的 PNC。其余的 PNC 位设置为 0。</p><blockquote><p><strong>[RS_Nm_02571] Nm shall handle requests for synchronized PNC shutdown</strong></p></blockquote><p>Nm 应处理同步 PNC 关闭的请求</p><blockquote><p>The Nm of an ECU in role a top-level PNC coordinator or intermediate PNC coordinator shall handle requests for a synchronized PNC shutdown indicated by ComM.</p></blockquote><p>担任顶级 PNC 协调器或中间 PNC 协调器角色的 ECU 的 Nm 应处理 ComM 指示的同步 PNC 关闭请求。</p><blockquote><p>Therefore, all information of indicated PNCs which has to be released shall be stored per NM-Channel. The stored request for a synchronized PNC shutdown are transformed to a byte array, where each bit represents a particular PNC (PNC bit vector).</p></blockquote><p>因此，必须发布的指示 PNC 的所有信息应按 NM 通道存储。存储的同步 PNC 关闭请求被转换为字节数组，其中每个位代表一个特定的 PNC （PNC 位向量）。</p><blockquote><p>This PNC bit vector shall be provided per NM-Channel, if the Nm indicate to fetch and transmit the NM-PDU as PN shutdown message on the corresponding Nm-Channel.</p></blockquote><p>如果 &lt;Bus&gt;Nm 指示在相应的 Nm 通道上获取 NM-PDU 并将其作为 PN 关闭消息发送，则应为每个 NM 通道提供此 PNC 位向量。</p><blockquote><p>Requests for synchronized PNC shutdown shall be aggregated and provided as PNC bit vector to all affected NM-Channels, if the Nm indicate to transmit a NM-PDU.</p></blockquote><p>如果 &lt;Bus&gt;Nm 表示传输 NM-PDU，则应汇总同步 PNC 关闭的请求，并将其作为 PNC 位向量提供给所有受影响的 NM 通道。</p><blockquote><p><strong><span draft="">RS_Nm_02544</span> Nm shall forward the indication of a PN shutdown message</strong></p></blockquote><p>{草稿} Nm 应转发 PN 关闭消息的指示，充当中间 PNC 协调器的 ECU 的 Nm 应立即将收到的 PN 关闭消息的指示转发给 ComM</p><blockquote><p><strong>[RS_Nm_02572] Nm shall transmit requests for synchronized PNC shutdown as NM-PDU</strong></p></blockquote><p>&lt;Bus&gt;Nm 应将同步 PNC 关机请求作为 NM-PDU 传输</p><blockquote><p>The Nm of an ECU in role a top-level PNC coordinator or intermediate PNC coordinator handle requests for a synchronized PNC shutdown.</p></blockquote><p>担任顶级 PNC 协调器或中间 PNC 协调器角色的 ECU 的 Nm 处理同步 PNC 关闭的请求。</p><blockquote><p>Therefore NM indicate to start or stop a PNC shutdown process. If a PNC shutdown process has been started for a particular NM-Channel, then the Nm fetch the aggregated requests for a synchronized PNC shutdown as PNC bit vector and transmit the NM-PDU as PN shutdown message on the corresponding NM-Channel.</p></blockquote><p>因此 NM 表示启动或停止 PNC 关闭过程。如果已为特定 NM 通道启动了 PNC 关断过程，则 Nm 将同步 &lt;Bus&gt;PNC 关断的聚合请求作为 PNC 位向量获取，并在相应的 NM 通道上将 NM-PDU 作为 PN 关断消息传输。&lt;Bus&gt;Nm 表示已成功传输到 Nm。</p><blockquote><p>The Nm indicate a successfully transmission to the Nm. Otherwise a re-transmission shall be performed if configured.</p></blockquote><p>否则，如果已配置，则应执行重传</p><blockquote><p><strong><span draft="">RS_Nm_02561</span> Nm shall support Partial Networking</strong></p></blockquote><p>{草稿} Nm 应支持部分联网</p><blockquote><p>Nm maintain the PNC timer handling and indicate changes regarding internal and external PNC request to the upper layer</p></blockquote><p>Nm 维护 PNC 定时器处理，并向上层指示内部和外部 PNC 请求的更改</p><blockquote><p><strong>[RS_Nm_02562] Nm shall support channel-specific storage of IRA</strong></p></blockquote><p>Nm 应支持 IRA 的特定通道存储</p><blockquote><p>Nm stores the latest IRA (internal request array) which represents the internal PNC requests as PNC bit vector. The IRA is stored per given Nm-channel and provided to Nm to be transmitted within the Nm message.</p></blockquote><p>Nm 存储最新的 IRA （内部请求数组），它将内部 PNC 请求表示为 PNC 位向量。IRA 按给定的 Nm 通道存储，并提供给 &lt;Bus&gt;Nm 以在 Nm 消息中传输。</p><blockquote><p><strong>[RS_Nm_02563] Nm shall calculate the combined partial network request status EIRA</strong> (External and Internal Requests Aggregated)</p></blockquote><p>Nm 应计算合并的部分网络请求状态 EIRA</p><blockquote><p><strong>[RS_Nm_02564] Nm shall calculate the status of the external partial network requests ERA</strong>(External Requests Aggregated)</p></blockquote><p>Nm 应计算外部部分网络请求 ERA 的状态</p><blockquote><p><strong>[RS_Nm_02565] Nm shall communicate EIRA and ERA requests to the upper layers using dedicated APIs</strong></p></blockquote><p>&lt;Bus&gt;Nm 应使用专用 API 将 EIRA 和 ERA 请求传达给上层</p><blockquote><p><strong>[RS_Nm_02566] Nm shall support channel-specific configuration for ERA</strong></p></blockquote><p>Nm 应支持 ERA 的通道特定配置</p><blockquote><p><strong>[RS_Nm_02567] Nm shall support a global configuration for EIRA over all channels</strong></p></blockquote><p>Nm 应支持所有通道上的 EIRA 的全局配置</p><blockquote><p><strong>[RS_Nm_02574] Nm shall provide a confirmation API to indicate the transmission state PNC bit vector</strong></p></blockquote><p>Nm 应提供确认 API 以指示传输状态 PNC 位向量</p><h2 id="52-non-functional-requirements"><a class="anchor" href="#52-non-functional-requirements">#</a> <strong>5.2</strong> <strong>Non-Functional Requirements</strong></h2><h3 id="521-layout-requirements"><a class="anchor" href="#521-layout-requirements">#</a> <strong>5.2.1</strong> <strong>Layout Requirements</strong></h3><blockquote><p><strong>[RS_Nm_02541] Nm shall define a common layout of Nm messages.</strong></p></blockquote><p>Nm 应定义 Nm 消息的常见布局。</p><h3 id="522-timing-requirements"><a class="anchor" href="#522-timing-requirements">#</a> <strong>5.2.2</strong> <strong>Timing Requirements</strong></h3><blockquote><p><strong>[RS_Nm_00054] There shall be a deterministic time from the point where all nodes agree to go to bus sleep to the point where bus is switched off.</strong></p></blockquote><p>从所有 nodes 都同意进入 bus sleep 到 bus 关闭的那一刻，应该有一个确定的时间。</p><h3 id="523-resource-usage"><a class="anchor" href="#523-resource-usage">#</a> <strong>5.2.3</strong> <strong>Resource Usage</strong></h3><blockquote><p><strong>[RS_Nm_00142] Nm shall provide a mechanism to limit its bus load.</strong></p><p>Nm shall not exceed a specified upper limit of bus load. This bus load has to be specified. Example: 3% in normal operation, 6% Bus load peak.</p></blockquote><p>Nm 应提供一种机制来限制其总线负载。</p><p>Nm 不得超过规定的总线负载上限。必须指定此总线负载。示例：正常运行时为 3%，总线负载峰值为 6%。</p><blockquote><p><strong>[RS_Nm_00144] Nm shall support communication clusters of up to 64 ECUs</strong></p></blockquote><p>Nm 应支持多达 64 个 ECU 的通信集群</p><blockquote><p><strong>[RS_Nm_00145] On a properly configured node, Nm shall tolerate a loss of a predefined number of Nm messages</strong></p></blockquote><p>在正确配置的节点上，Nm 应容忍预定义数量的 Nm 消息的丢失</p><blockquote><p><strong>[RS_Nm_00146] The Nm shall tolerate a time jitter of Nm messages in one or more ECUs</strong></p></blockquote><p>Nm 应容忍一个或多个 ECU 中 Nm 消息的时间抖动</p><blockquote><p><strong>[RS_Nm_00152] The specification and implementation shall be split-up into a communication system independent and communication system dependent parts.</strong></p></blockquote><p>规范和实现应分为独立于通信系统的部分和从属于通信系统的部分。</p><blockquote><p><strong>[RS_Nm_00149] The timing of Nm shall be configurable.</strong></p></blockquote><p>Nm 的时间应该是可配置的。</p><blockquote><p>All timing parameters of the Nm shall be configurable. This includes timings defining sending of Nm messages, minimum send repetitions, staying awake until common shutdown etc.</p></blockquote><p>Nm 的所有时序参数都是可配置的。这包括定义 Nm 消息发送的时间、最小发送重复次数、保持清醒直到共同关闭等。在所有节点都指示它们已准备好休眠后，直到网络关闭的时间。节点的两个连续状态指示之间的时间间隔，无论它是否准备好休眠。根据可配置的节点数量确定时序。</p><h3 id="524-hardware-independency"><a class="anchor" href="#524-hardware-independency">#</a> <strong>5.2.4</strong> <strong>Hardware independency</strong></h3><blockquote><p><strong>[RS_Nm_00154] The Network Management API shall be independent from the communication bus</strong></p></blockquote><p>网络管理 API 应独立于通信总线</p><hr><h1 id="二-e2e"><a class="anchor" href="#二-e2e">#</a> 二、E2E</h1><h1 id="1-scope-of-this-document"><a class="anchor" href="#1-scope-of-this-document">#</a> <strong>1 Scope of this document</strong></h1><blockquote><p>This document specifies requirements on the E2E protocol. The E2E protocol defines abstract mechanisms to provide End-to-End communication protection according to requirements of ISO 26262:2018 (all parts) [1].</p></blockquote><p>本文件规定了 E2E 协议的要求。E2E 协议根据 ISO 26262:2018 (all parts) 所有部分) 的要求定义了提供端对端通信保护的抽象机制 [11.</p><blockquote><p>These mechanisms shall allow safe data transmission of safety-related data for all integrity levels defined by [1] over a non safety-related communication path. This document covers the protocol part only and therefore the End-to-End path just partly.</p></blockquote><p>这些机制应允许在下列所有完整性级别上安全相关数据的安全数据传输:[1] 在与安全无关的通信路径上。本文仅涵盖协议部分，因此仅部分涵盖端到端路径。</p><blockquote><p>These requirements shall be used as a basis for the specification of detailed E2E mechanisms and their usage in AUTOSAR implementations. Note: The document contains well known requirements from classic platform documents and brings in new requirements for the adaptive platform as far as foreseen.</p></blockquote><p>这些要求应作为详细 E2E 机制及其在 AUTOSAR 实现中使用的规格的基础。注意：该文件包含来自经典平台文件的已知要求，并引入了对自适应平台的新要求。</p><blockquote><p>Use cases for E2E protection in adaptive platform are under elaboration. More details on the relevant use cases will be added within next version of this document.</p></blockquote><p>自适应平台中的 E2E 保护用例正在制定中，有关用例的更多细节将在本文档的下一个版本中添加。</p><blockquote><p>This is a draft specification to indicate the intended scope and direction of discussion to the AUTOSAR development community. This specification has seen less quality measures, less discussions among partners and may, generally, be in a less maturestate.</p></blockquote><p>这是一份规范草案，旨在向 AUTOSAR 开发社区指明讨论的范围和方向。该规范的质量指标较少，合作伙伴之间的讨论较少，总体上可能不太成熟。</p><h1 id="4-functional-overview"><a class="anchor" href="#4-functional-overview">#</a> <strong>4 Functional Overview</strong></h1><blockquote><p>Safety-related automotive systems often use a safe data transmission to protect communication between components (as required by ISO 26262:2018 (all parts) [1]), which means that:</p><ul><li>Communication errors shall be prevented (e.g. by means of appropriate software architecture and by means of verification).</li><li>If error prevention alone is insufficient (e.g. for inter-ECU communication), then<ul><li>the errors shall be detected at runtime to a sufficient degree (cf. diagnostic coverage, safe failure fraction) and</li><li>the rate of undetected dangerous errors shall be below some allowed limit(cf. residual error rate, probability of dangerous failure per hour or probability of dangerous failure on demand).</li></ul></li></ul></blockquote><p>与安全相关的汽车系统通常使用安全数据传输来保护组件之间的通信 (ISO 26262:2018 (all parts) [1])，这意味着:</p><ul><li>应防止通信错误 (例如通过适当的软件架构和通过验证)</li><li>如果仅有错误预防是不够的 (例如对于 ECU 之间的通信)，那么<ul><li>在运行时应检测到足够程度的误差 (参见诊断覆盖率、安全故障分级) 和</li><li>未发现的危险差错率应低于某些允许限度 (参见残留差错率、每小时发生危险故障的概率或按需发生危险故障的概率)。</li></ul></li></ul><h2 id="41-functional-safety-and-communication"><a class="anchor" href="#41-functional-safety-and-communication">#</a> <strong>4.1</strong> <strong>Functional safety and communication</strong></h2><blockquote><p>With respect to the exchange of information in safety-related systems, the mechanisms for the in-time detection of causes for faults, or effects of faults as listed below, can be used to design suitable safety concepts, e.g. to achieve freedom from interference between system elements sharing a common communication infrastructure (see ISO 26262-6:2018, annex D.2.4).</p></blockquote><p>在安全相关系统的信息交换方面，可以使用以下列出的对故障原因或故障影响的及时检测机制来设计合适的安全概念，例如实现共享通信基础设施的系统元件之间不受干扰 (see ISO 26262-6:2018, annex D.2.4).</p><p><img data-src="../../../img.assets/24-11-04%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%B0%8F%E6%9F%B4%E5%B8%A6%E4%BD%A0%E5%AD%A6%E4%B9%A0AutoSar%E7%B3%BB%E5%88%97%E4%B8%89%E3%80%81%E6%A0%87%E5%87%86%E5%92%8C%E8%A7%84%E8%8C%83%E7%AF%87%EF%BC%885%EF%BC%89CommunicationManagement/image-20240919154502493.png" alt="image-20240919154502493"></p><h2 id="42-sources-of-faults-in-e2e-communication"><a class="anchor" href="#42-sources-of-faults-in-e2e-communication">#</a> <strong>4.2</strong> <strong>Sources of faults in E2E communication</strong></h2><blockquote><p>E2E communication protection aims to detect and mitigate the causes for or effects of communication faults arising from:</p></blockquote><p>E2E 通信保护旨在检测和减轻由以下原因引起的通信故障的原因或影响:</p><h3 id="1software-faults"><a class="anchor" href="#1software-faults">#</a> <strong>1.Software faults</strong></h3><blockquote><p>Software like, communication stack modules and RTE, may contain faults, which are of a systematic nature.</p></blockquote><p>像通信堆栈模块和 RTE 这样的软件可能包含系统性故障。</p><blockquote><p>Systematic faults may occur in any stage of the system’s life cycle including specification, design, manufacturing, operation, and maintenance, and they will always appear when the circumstances (e.g. trigger conditions for the root cause) are the same.</p></blockquote><p>系统性故障可能发生在系统生存周期的任何阶段，包括规范、设计、制造、操作和维护，并且它们总是在相同的情况下出现 (例如根本原因的触发条件)。</p><blockquote><p>The consequences of software faults can be failures of the communication, like interruption of sending of data, overrun of the receiver (e.g. buffer overflow), or underrun of the sender (e.g. buffer empty).</p></blockquote><p>软件故障的后果可能是通信故障，例如数据发送中断、接收器溢出 (例如缓冲区溢出) 或发送器空转 (例如缓冲区空转)</p><blockquote><p>To prevent (or to handle) resulting failures the appropriate technical measures to detect and handle such faults (e.g. program flow monitoring or E2E supervision) have to be considered.</p></blockquote><p>为了防止 (或处理) 由此导致的故障，必须考虑采取适当的技术措施来检测和处理此类故障 (如程序流程监控或 E2E 监督)。</p><h3 id="2random-hardware-faults"><a class="anchor" href="#2random-hardware-faults">#</a> <strong>2.Random hardware faults</strong></h3><blockquote><p>A random hardware fault is typically the result of electrical overload, degradation, aging or exposure to external influences (e.g. environmental stress) of hardware parts.</p></blockquote><p>随机硬件故障通常是硬件部件的电气过载、退化、老化或暴露于外部影响 (例如环境压力) 的结果。</p><blockquote><p>A random hardware fault cannot be avoided completely, but its probability can be evaluated and appropriate technical measures can be implemented (e.g. diagnostics).</p></blockquote><p>不能完全避免随机硬件故障，但可以对其概率进行评估，并实施适当的技术措施 (如诊断)</p><h3 id="3transient-faults"><a class="anchor" href="#3transient-faults">#</a> <strong>3.Transient faults</strong></h3><blockquote><p>Transient faults typically result from external influences or environmental stress, this in cludes influences like EMI, ESD, humidity, corrosion, temperature or mechanical stress (e.g. vibration).</p></blockquote><p>瞬态故障通常由外部影响或环境应力引起，这包括 EMI、ESD、湿度腐蚀、温度或机械应力 (例如振动)。</p><h2 id="43-safe-end-to-end-communication-in-autosar"><a class="anchor" href="#43-safe-end-to-end-communication-in-autosar">#</a> <strong>4.3</strong> <strong>Safe End-to-End communication in AUTOSAR</strong></h2><blockquote><p>To provide a safe End-to-End communication, a solution shall be integrated within the AUTOSAR methodology which does require no or a minimal amount of additional nonstandard code like wrappers.</p></blockquote><p>为了提供安全的端到端通信，应在 AUTOSAR 方法中集成一个解决方案该解决方案确实不需要或只需要少量的额外非标准代码 (如封装器)</p><blockquote><p>The functionality of End-to-End communication protection is to be supported by the E2E protocol.</p></blockquote><p>E2E 协议将支持端到端通信保护的功能。</p><blockquote><p>The E2E protocol provides</p><ul><li>Mechanisms to detect a subset of communication faults listed in 4.1. The relevant communication faults depend on the type of communication (e.g. periodic, non periodic, sender/receiver, etc.).</li><li>The definition of profiles 1, 2, 4, 5, 6, 7, 11 and 22 including check and protect functions for one single data transfer. The appropriate profile is to be selected according to the used physical bus layer and the size of the transferred data.</li><li>An optional state machine describing the logical algorithm of E2E monitoring and state handling for a number of data transfers between two dedicated communication partners independent of the used profile.</li></ul></blockquote><p>E2E 协议提供了</p><ul><li>用于检测 4.1 中所列通信故障子集的机制。相关的通信故障取决于通信的类型 (如周期性、非周期性、发送方 / 接收方等)。</li><li>定义 1、2、4、5、6、7、11 和 22 的配置文件，包括单个数据传输的检查和保护功能。应根据使用的物理总线层和传输的数据大小选择适当的配置文件。</li><li>一个可选的状态机，描述了 E2E 监控和状态处理的逻辑算法，用于两个专用通信伙伴之间的一系列数据传输，而不考虑使用的配置文件。</li></ul><blockquote><p>Note: Additional architectural measures may be necessary to ensure safe operation of the E2E protocol implementation.</p></blockquote><p>注：可能需要额外的架构措施来确保 E2E 协议实现的安全运行。</p><h3 id="431-e2e-protection-concepts"><a class="anchor" href="#431-e2e-protection-concepts">#</a> <strong>4.3.1</strong> <strong>E2E protection concepts</strong></h3><blockquote><p>An E2E protection concept is more than just adding adequate safety mechanisms to data elements (e.g. using E2E Profile 1 or 2).</p></blockquote><p>E2E 保护概念不仅仅是为数据元素添加足够的安全机制 (例如使用 E2E Profile 1 或 2)</p><blockquote><p>To ensure the integrity of a communication channel with the required safety integrity level acc. to ISO 26262 the E2E protection concept needs to consider the safety-related properties of the data transmitted via a bus network that requires protection.</p></blockquote><p>为了确保与 ISO 26262 要求的安全完整性级别相对应的通信通道的完整性，E2E 保护概念需要考虑通过需要保护的总线网络传输的数据的安全相关属性。</p><blockquote><p>Basic principles to implement an E2E protection concept that focuses on correctness, consistency, completeness, timeliness and the detection of non-availability of data are provided in this chapter.</p></blockquote><p>本章提供了实现以正确性、一致性、完整性、及时性和检测数据不可用性为重点的 E2E 保护概念的基本原则。</p><blockquote><p>Note: For an E2E protection concept that focuses on ensuring the availability of data, an implementation of the communication channel with a sufficient fault tolerance is needed (e.g. using independent redundant channels).</p></blockquote><p>注：对于侧重于确保数据可用性的 E2E 保护概念，需要实现具有足够容错能力的通信信道 (例如，使用独立冗余信道)</p><blockquote><p>Note: The usage of redundant communication channels may create a need for additional safety mechanisms (e.g. to ensure the consistency of the data streams when transmitted independently).</p></blockquote><p>注：使用冗余通信信道可能需要额外的安全机制 (例如，在单独传输时确保数据流的一致性)。</p><blockquote><p>Typical basic principles for effective E2E protection concepts are :</p><p>有效的 E2E 保护概念的典型基本原则是:</p><ul><li><p>The infrastructure used for data transmission (e.g. Buses, Gateways, etc.) is designed and implemented in such way that it cannot systematically interfere with the used E2E protection (e.g. by unpacking and changing protected data).</p><p>用于数据传输的基础设施 (例如，总线、网关等) 的设计和实现方式不能系统性地干扰所使用的端到端保护 (例如，通过解包和更改受保护的数据)</p></li><li><p>In case of an internal fault during provision of data, the provider (e.g. sender or client) ensures that it sends out either data explicitly labeled as invalid (i.e. only the specific data elements that are possibly affected by this internal fault) or else no data (i.e. fail-safe respectively fail-silent behavior of sender in case of a severe fault).</p><p>在数据提供过程中发生内部故障的情况下，提供者 (例如发送方或客户端) 确保它发送出明确标记为无效的数据 (即，只有可能受到此内部故障影响的特定数据元素) 或者不发送任何数据 (即，严重故障情况下发送方的故障安全或故障静默行为)。</p></li><li><p>In normal operation mode, 在正常运行模式下</p><ul><li><p>the provider (e.g. sender or client) of the data</p><p>数据的提供者 (例如发送者或客户端)</p><ul><li><p>groups the data as pre- determined (e.g. to ensure consistency for a set of data) and protects the grouped data with suitable protection mechanisms prior to their transmission.</p><p>将数据按预先确定的顺序分组 (例如，确保一组数据的一致性)，并在传输前用合适的保护机制保护分组的数据。</p></li><li><p>ensures that it sends out valid data, only. In this context valid data means:</p><p>确保它仅发送有效数据。在此上下文中，有效数据意味着:</p><ul><li><p>Data fully complying with their required safety-related properties</p><p>数据完全符合其所要求的安全特性</p></li><li><p>Data complying with their required safety-related properties to the extent signaled by an additionally provided qualifier (i.e. signal qualifier)</p><p>在额外提供的限定符 (即信号限定符) 所示的范围内，数据符合其所需的安全相关特性</p></li><li><p>Data explicitly labeled as invalid data (e.g. using a signal invalid value)</p><p>明确标记为无效数据的数据 (例如使用信号无效值)</p></li></ul></li><li><p>ensures in case of periodic/ mixed periodic communication that it sends out valid data on a regular basis (e.g. cyclic).</p><p>在周期性 / 混合周期性通信情况下，确保它定期 (例如循环) 发送有效数据。</p></li></ul></li><li><p>the consumer (e.g. receiver, client or server) of the data</p><p>数据的消费者 (如接收器、客户端或服务器)</p><ul><li><p>monitors whether new data has arrived on a regular basis (e.g. cyclic) independently from an external trigger condition coming from elements to which it wants to achieve freedom from interference (e.g. communication stack)</p><p>监视新数据是否定期 (例如周期性地) 到达，而不受外部触发条件 (例如通信堆栈) 的影响。</p></li><li><p>is able to detect relevant communication faults within its determined time interval by evaluating the protection mechanisms of the received data and in case of periodic/ mixed periodic communication its internal timeout monitoring.</p><p>通过评估接收数据的保护机制，并在周期性 / 混合周期性通信的情况下进行内部超时监控，能够在其确定的时间间隔内检测到相关的通信故障。</p></li></ul></li></ul></li><li><p>In case a communication fault is detected 如果检测到通信故障</p><ul><li><p>the consumer of the protected data (e.g. receiver, client or server) autonomously initiates the necessary reactions to mitigate the detected communication fault within its determined time interval in compliance with the functional safety concept of the system (i.e. fail-safe respectively fail-silent behavior of receiver).</p><p>受保护数据的消费者 (例如接收器、客户端或服务器) 根据系统的功能安全概念 (即接收器的故障安全或故障沉默行为) 在确定的时间间隔内自主启动必要的反应，以减轻检测到的通信故障。</p></li></ul></li><li><p>Based on the ISO26262 the fault tolerance time interval (FTTI) of the respective safety-related system is the allowed time interval for fault detection and mitigationincluding the relevant data exchange part and the corresponding communication path.</p><p>基于 ISO26262，各安全相关系统的容错时间间隔 (FTI) 是允许故障检测和缓解的时间间隔，包括相关数据交换部分和相应的通信路径。</p><ul><li><p>The fault tolerance time interval concerning the whole system (absolute FTTI), the allowed time interval includes the allowed time interval for the detection and mitigation of faults at the provider of the date (e.g. sender), the time interval required for robustness of data transmission during normal operation (e.g. to compensate gateways) and the allowed time interval for the detection and mitigation of faults at the consumer of the data (e.g.receiver).</p><p>关于整个系统的容错时间间隔 (绝对 FTTI)，允许的时间间隔包括在数据提供商检测和缓解故障的允许的时间间隔。(例如发送方)、在正常操作期间数据传输的稳健性所需的时间间隔 (例如补偿网关) 以及在数据的消费者 (例如接收方) 检测和缓解故障的允许时间间隔。</p></li><li><p>The fault tolerance time interval concerning the data exchange part and the corresponding communication path only (relative FTTI), corresponds to the maximum tolerated duration of erroneous data, and is thus the allowed time interval for the detection and mitigation of faults at the consumer of the data (e.g. receiver).</p><p>仅涉及数据交换部分和相应通信路径的容错时间间隔相对 FTTI) 对应于错误数据的最大容忍持续时间，因此是检测和缓解数据使用者 (例如接收者) 故障的允许时间间隔。</p></li></ul></li></ul></blockquote><h3 id="432-integrity-of-a-communication-channel"><a class="anchor" href="#432-integrity-of-a-communication-channel">#</a> <strong>4.3.2</strong> <strong>Integrity of a communication channel</strong></h3><blockquote><p>To determine the integrity of communication and to distinguish if the received data are valid the consumer of the data (e.g. receiver) can:</p></blockquote><p>为了确定通信的完整性并区分所接收的数据是否有效，数据的消费者 (例如接收器可以:</p><blockquote><ul><li><p>evaluate each received protected message separately and</p><p>分别评估每个接收到的受保护消息，并</p></li><li><p>monitor all evaluation results of a number of protected data received within a determined time interval for error detection and qualification <em>t**EDQ</em> up to the data received at last.</p><p>监控在确定时间间隔内接收到的多个受保护数据的所有评估结果，以便检测错误并限定<strong> t</strong>EDQ，直至最终接收到的数据。</p></li></ul><p>To implement the monitoring function the consumer of the protected data (e.g. receiver) creates a history of the received data. Valid received data are stored with a history as follows:</p><p>为了实现监视功能，旁受保护数据的消费者 (例如接收器) 创建接收数据的历史记录。有效的接收数据用历史记录存储如下:</p><ul><li><p>Generation 0 is the latest (up to date) received valid data</p><p>Generation 0 是最新 (截至日期) 收到的有效数据</p></li><li><p>Generation 1 is the second-latest received valid data</p><p>Generation 1 第二个最新收到的有效数据</p></li><li><p>Generation 2 is the third-latest received valid data</p><p>Generation 2 是第三个最新收到的有效数据</p></li><li><p>etc.</p></li></ul><p>To do so, each recently received valid message is stored as Generation 0 having a reference value indicating its age set to 0. Every time the consumer of the protected data (e.g. receiver) checks for reception of new data it increments the age of its already received data by 1.</p></blockquote><p>为此，每个最近收到的有效消息都被存储为具有指示其年龄设置为 0 的参考值的第 0 代。每次受保护数据 (例如接收器) 的消费者检查新数据的接收情况时，它都会将其已接收数据的年龄增加 1。</p><blockquote><p>Stored data can be used as basis for a safety related functionality provided by the consumer of the protected data (e.g. receiver) as long as its age reference value is less a determined boundary value N.</p></blockquote><p>只要其年龄参考值小于确定的边界值 N，存储的数据就可以用作由受保护数据 (例如接收器) 的消费者提供的安全相关功能的基础。</p><blockquote><p>The parameter N can be derived by dividing the determined time interval for error detection and qualification <strong>t</strong>EDQ with the cycle time used for its regular transmission (e.g. for a receiver having a <strong>t</strong>EDQ = 160ms and a regular cycle time of 20ms the value N = 160ms/20ms = 8).</p></blockquote><p>参数 N 可以通过将确定的用于错误检测和确认的时间间隔 tEDO 除以用于其常规传输的周期时间 (例如，对于具有 tEDO=160ms 和常规周期时间为 20ms 的接收器，值 N=160ms/20ms=8) 来推导。</p><blockquote><p>In case that sufficiently up to date data is no longer available, the consumer’s (e.g. receiver’s) application applies a safe reaction determined in the safety concept. Such reaction can be a degraded mode.</p></blockquote><p>如果不再有足够的数据可用，则消费者 (例如接收器) 的应用程序将应用安全概念中确定的安全反应。这种反应可以是降级模式。</p><h1 id="6-requirements-specification"><a class="anchor" href="#6-requirements-specification">#</a> <strong>6 Requirements Specification</strong></h1><h2 id="61-functional-requirements"><a class="anchor" href="#61-functional-requirements">#</a> <strong>6.1</strong> <strong>Functional Requirements</strong></h2><h3 id="supported-communication-models-and-features"><a class="anchor" href="#supported-communication-models-and-features">#</a> <strong>Supported communication models and features</strong></h3><blockquote><p>E2E protocol is defined to support different types of message-based communication.<br>Signal-based communication:</p><ul><li>periodic/mixed periodic sender/receiver communication</li></ul><p>Service-oriented communication:</p><ul><li>periodic/mixed periodic event-based communication</li><li>non-periodic method-based communication (client-server communication)</li></ul></blockquote><p>E2E 协议被定义为支持不同类型的基于消息的通信。基于信号的通信:</p><ul><li>周期性 / 混合周期性发送方 / 接收方通信</li></ul><p>面向服务的沟通:</p><ul><li>基于周期 / 混合周期事件的通信</li><li>基于非周期方法的通信 (客户端 - 服务器通信)</li></ul><blockquote><p><strong>[RS_E2E_08540] E2E protocol shall support protected periodic/mixed periodic communication</strong></p><p>The E2E protocol shall support protected periodic communication.</p><p>This includes the following periodicity:</p><ul><li>periodic</li><li>mixed periodic</li></ul><p>E2E 协议应支持受保护的定期通信。</p><p><strong>Use Case:</strong></p><ul><li>Sender/receiver communication in CP, e.g. the following use cases<ul><li>Receiver being invoked independently from sender</li><li>Receiver being invoked on arrival of data</li><li>Mixed: Receiver being invoked when data arrives and independently.)</li></ul></li><li>Events implement message-oriented communication in AP service interfaces.</li></ul><p>CP 中的发送方 / 接收方通信，例如以下用例</p><ul><li>接收器被调用，独立于发送器</li><li>数据到达时调用接收器</li><li>混合：在数据到达时单独调用接收器。</li></ul><p>事件在 AP 服务接口中实现面向消息的通信。</p><p><strong draft="">[RS_E2E_08541]</strong> <strong>E2E protocol shall support protected non-periodic communication</strong></p><p><strong draft="">[RS_E2E_08542]</strong> <strong>E2E protocol shall support dynamic restart of communication peers</strong></p><p><strong draft="">[RS_E2E_08543]</strong> <strong>E2E protocol shall support variable length of transmitted data</strong></p></blockquote><h3 id="e2e-detected-faults"><a class="anchor" href="#e2e-detected-faults">#</a> <strong>E2E detected faults</strong></h3><blockquote><p>E2E protocol is defined to cover a number of faults described in 4.1. However, it depends on the type of communication which kind of faults can be detected, e.g. for non-periodic event-based communication loss of communication data cannot be detected by E2E protocol mechanisms.</p></blockquote><p>E2E 协议被定义为涵盖 4.1 中描述的一些<a href="#4.1">故障</a>。然而，它取决于通信类型，哪种类型的故障可以被检测到，例如，对于基于非周期性事件的通信，通信数据的丢失不能被 E2E 协议机制检测到。</p><blockquote><p><strong draft="">[RS_E2E_08544]</strong> <strong>E2E protocol shall provide a timeout detection mechanism</strong></p><p>Note: A timeout detection mechanism to identify lost or delayed method responses in non-periodic method communication cannot be provided by an E2E protocol specification. This kind of mechanism has to be specified and implemented either by the application itself or as part of communication management functionality</p></blockquote><p>注意：E2E 协议规范不能提供一种超时检测机制来识别非周期性方法通信中丢失或延迟的方法响应，这种机制必须由应用程序本身指定和实现，或者作为通信管理功能的一部分</p><blockquote><p><strong draft="">[RS_E2E_08545]</strong> <strong>E2E protocol shall provide a detection mechanism for corrupted data</strong></p></blockquote><p>损坏数据检测机制</p><blockquote><p><strong draft="">[RS_E2E_08546]</strong> <strong>E2E protocol shall provide a detection mechanism for masquerade or incorrect addressing</strong></p></blockquote><p>E2E 协议应提供伪装或地址错误的检测机制</p><blockquote><p><strong draft="">[RS_E2E_08547]</strong> <strong>E2E protocol shall provide a detection mechanism for repetition, insertion or incorrect sequence of data</strong></p></blockquote><p>E2E 协议应提供对重复、插入或数据序列不正确的检测机制</p><h3 id="e2e-algorithms-and-profiles"><a class="anchor" href="#e2e-algorithms-and-profiles">#</a> <strong>E2E Algorithms and Profiles</strong></h3><blockquote><p>E2E protocol is defined to cover various sizes of exchanged data and different types of physical bus medium. Therefore, a number of E2E profiles are created. Each E2E profile provides a set of E2E measures as required in 6.1.2.</p></blockquote><p>E2E 协议的定义涵盖了各种大小的交换数据和不同类型的物理总线介质，因此创建了许多 E2E 配置文件，每个 E2E 配置文件的 6.1.2 要求提供一组 E2E 措施。</p><blockquote><p><strong>[RS_E2E_08528] E2E protocol shall provide different E2E profiles</strong></p><p>E2E protocol shall provide E2E profiles, where each E2E profile completely defines a particular safety protocol (including header structure, behavior as state machine, error handling etc).</p><p>E2E 协议应提供 E2E 配置文件，其中每个 E2E 分布文件完全定义了特定的安全协议 (包括头结构、状态机行为、错误处理等)。</p><p>Each E2E profile shall be an efficient solution for a particular communication stack used underneath (which are either FlexRay, CAN, CAN FD, LIN or Ethernet), used data length and data frequency, and the required integrity level (see [1]) of the exchanged data.</p><p>每个 E2E 配置文件都是针对特定通信堆栈 (FlexRay、CAN、CAN FD、LIN 或以太网) 使用的数据长度和数据频率以及所需完整性级别 (见 6.1.1) 的高效解决方案 [1]) 交换的数据。</p><p>Note: Each communication stack (e.g. FlexRay) has different BER, which depends on, for example:</p><p>注意：每个通信堆栈 (例如，FlexRay) 具有不同的 BER，这取决于，例如:</p><ul><li>Bit error rate on channel 信道比特出错率</li><li>FIT values of HW 硬件的匹配值</li><li>Number of ECUs ECU 数目</li><li>Topology (e.g. CAN-&gt;Gateway-&gt;FR) 拓扑 (例如 CAN-&gt; 网关 -&gt;FR)</li><li>Open/closed transmission system 开放式 / 闭式传动系统</li></ul><p>The profiles are supposed to cover typical combinations of above factors.</p><p>概况应涵盖上述因素的典型组合。</p></blockquote><h3 id="use-case"><a class="anchor" href="#use-case">#</a> <strong>Use Case:</strong></h3><ul><li>E2E profile with 8-bit CRC for CAN/CAN FD</li><li>E2E profile with 16-bit CRC for long FlexRay signals,</li><li>E2E profile with 32/64-bit CRC for Ethernet.</li></ul><blockquote><p><strong>[RS_E2E_08530] Each E2E profile shall define a set of protection mechanisms</strong><br><strong>and its behavior</strong></p><p>Each E2E profile defined shall:</p><ul><li>Define precisely a set of mechanisms (e.g. CRC of a particular polynomial).</li><li>精确定义一组机制 (例如特定多项式的 CRC)</li><li>Define its behavior in a semi-formal way (including state machines, error handling etc.).</li><li>以半形式化的方式定义其行为 (包括状态机、错误处理等)</li></ul></blockquote><p>Note: For CP the E2E profiles are provided within the E2E library</p><blockquote><p><strong draft="">[RS_E2E_08549]</strong> <strong>Each E2E profile shall have a unique Profile ID</strong></p><p><strong>[RS_E2E_08529] Each E2E profile shall use an appropriate subset of specific protection mechanisms</strong></p><p>Each of the defined E2E profiles shall use an appropriate subset of the following mechanisms:</p><p>每个定义的 E2E 简介应使用下列机制的适当子集:</p><ul><li><p>Sequence counter with different sizes (alternatively used as alive counter)</p><p>不同大小的序列计数器 (可作为活计数器使用)</p></li><li><p>CRC with different Bit length</p><p>具有不同比特长度的 CRC</p></li><li><p>IDs: Source ID, Destination ID, Data ID</p><p>ID: 源 ID，目标 ID，数据 ID</p></li><li><p>Timeout</p></li><li><p>Length</p></li></ul><p>In other words, mechanisms not listed shall not be used. In each E2E profile, the sequence counter and IDs, if used, should be all part of the transmitted data element. However, it is allowed that in a given profile, the sequence counter and/or IDs are “hidden” (not transmitted), but included in the checksum.</p></blockquote><p>换句话说，不应使用未列出的机制。在每个 E2E 配置文件中，如果使用序列计数器和 ID，则它们应该是传输数据元素的一部分。但是，允许在给定的配置文件中 “隐藏”(不传输) 序列计数器和 / 或 ID，但将其包含在校验和中。</p><blockquote><p><strong>[RS_E2E_08533] CRC used in a E2E profile shall be different than the CRC used by the underlying physical communication protocol</strong></p><p>CRC used in each E2E profile shall be different than the CRC used by the underlying communication protocols (FlexRay, CAN, CAN FD, LIN, Ethernet), for which the given profile is supposed to be used with.</p><p>每个 E2E 配置文件使用的 CRC 应与底层通信协议 (FlexRay、CAN、CAN FD、LIN、以太网) 使用的 CRC 不同，该配置文件应与之配合使用</p><p>Using the same polynomials twice (once in com stack and again in E2E) provides significantly lower joint detection rate than using two different polynomials.</p><p>与使用两个不同的多项式相比，两次使用相同的多项式 (一次在 com 栈中，- 次在 E2E 中) 的联合检测率要低得多。</p></blockquote><blockquote><p><strong>[RS_E2E_08534] E2E protocol shall provide E2E Check status to the application</strong></p></blockquote><p>有个校验状态</p><blockquote><p><strong><span draft="">RS_E2E_08548</span> E2E protocol shall provide E2E overall state to the application</strong></p></blockquote><p>有一个总体状态</p><blockquote><p><strong>[RS_E2E_08539] An E2E protection mechanism for inter-ECU communication of short to large data shall be provided</strong></p><p>The E2E protocol shall support protection of short (ex. 8 bytes) and large (ex.4KB, up to 4MB, as application requires), composite data with dynamic-length over TCP/IP and over LIN/CAN/CAN TP/CAN FD/FlexRay/Ethernet.</p><p>E2E 协议应支持在 TCP/IP 和 LIN/CAN/CAN TP/CAN FD/FlexRay/ 以太网中保护短 (例如 8 字节) 和大 (例如 4KB，最多 4MB，根据应用程序要求) 的动态长度复合数据。</p><p>Note: The max length of protected data depends on the architecture and needs to be evaluated by quantitative analysis within the project using the E2E protocol profile.</p></blockquote><p>注意：受保护数据的最大长度取决于架构，需要在项目中使用 E2E 协议简介进行定量分析来评估。</p><blockquote><p><strong>[RS_E2E_08550] The implementation of the E2E Supervision shall provide at least one of the E2E Profiles</strong></p></blockquote><h2 id="62-safety-applicability-and-overall-safety-assumptions"><a class="anchor" href="#62-safety-applicability-and-overall-safety-assumptions">#</a> <strong>6.2</strong> <strong>Safety applicability and overall safety assumptions</strong></h2><blockquote><p><strong>[RS_E2E_08527] Implementation of E2E protocol shall fulfill ISO 26262</strong></p></blockquote><p>E2E communication protection is state-of-art in automotive safety-related series products.</p><p>E2E 通信保护是汽车安全相关系列产品中最先进的。</p><h2 id="63-e2e-transformer"><a class="anchor" href="#63-e2e-transformer">#</a> <strong>6.3</strong> <strong>E2E Transformer</strong></h2><blockquote><p>The E2E Transformer is invoked via RTE and it is placed between the RTE and E2E Library. It is responsible for the configuration and state management of the E2E protection.</p></blockquote><p>E2E Transformer 是通过 RTE 调用的，它位于 RTE 和 E2E 库之间。它负责 E2E 保护的配置和状态管理。</p><blockquote><p><strong>[RS_E2E_08538] An E2E Transformer shall be provided</strong></p></blockquote><h2 id="64-e2e-library"><a class="anchor" href="#64-e2e-library">#</a> <strong>6.4</strong> <strong>E2E Library</strong></h2><blockquote><p>The E2E Library provides a set of safety protocols, in a form of library functions invoked by SW-Cs. It provides:</p><ul><li>E2E profiles 1, 2, 4, 5, 6, 7, 11, 22.</li><li>E2E state machine</li></ul><p>Note:</p><p>Each communication stack (e.g. FlexRay) has different error rates which depend on</p><p>for example:</p><ul><li>Bit error rate on channel</li><li>FIT values of HW</li><li>Number of ECUs</li><li>Topology (e.g. CAN-&gt;Gateway-&gt;FR)</li><li>Open/closed transmission system</li><li>Frequency of safety related messages</li></ul><p>The profiles, based on proven-in-use solutions, are supposed to cover typical combinations of above factors.</p><p><strong>[RS_E2E_08531] E2E Library shall call the CRC routines of CRC library</strong></p><p><strong>[RS_E2E_08537] SW-Cs shall tolerate a number of invalid/corrupted received data elements</strong></p></blockquote><p>要允许接收一些无效 / 损坏的元素</p><blockquote><p>SW-Cs shall tolerate a number of data elements that are invalid/corrupted but not detected by E2E as defined in architecture specific safety analysis for the used E2E protocol.</p></blockquote><p>SW-C 应容忍许多无效 / 损坏但未被 E2E 检测到的数据元素，如所用 E2E 协议的架构特定安全分析中所定义。</p><blockquote><p>Requiring that 100% errors are detected by E2E protocol has high impact on implementation of E2E library (e.g. requiring SW or/and HW redundancy) and suitability of applied E2E profile. Allowing at least one invalid signal (in a sequence of received signals) that is not detected by E2E mechanisms enables for instance the usage of profiles that contain shorter CRCs like E2E profiles 01, 11 and 02, 22.</p></blockquote><p>要求 E2E 协议检测 100% 的错误会对 E2E 库的实现 (例如，要求 SW 或 / 和 HW 冗余) 和适用的 E2E 配置文件产生很大影响。允许至少一个无效信号 (在接收到的信号序列中) 未被 E2E 机制检测到，例如可以使用包含较短 CRC 的配置文件，如 E2E 配置文件的 01、11 和 02、22。</p><hr><h1 id="三-logandtrace"><a class="anchor" href="#三-logandtrace">#</a> 三、LogAndTrace</h1><h1 id="1-scope-of-document-2"><a class="anchor" href="#1-scope-of-document-2">#</a> <strong>1 Scope of Document</strong></h1><blockquote><p>This following specification defines the functional and non-functional requirements of Log and Trace (LT) for AUTOSAR.</p><p>The focus of this document is to specify the requirements for:</p><ul><li>The interface of LT to other CP:BSW modules / AP:Functional Clusters</li><li>The interface to CP:RTE/VFB / AP:ARA Tracing</li><li>The interface to CP:SWCs / AP:Applications</li><li>The transmission and storage format of the log and trace messages</li><li>The internal interface to the LT communication module</li><li>The general configuration of LT</li></ul><p>The document does NOT specify the requirements for:</p><ul><li>The transport layer of the communication over the LT communication module</li></ul></blockquote><p>以下规范定义了 AUTOSAR 的日志和跟踪 (LT) 的功能性和非功能性要求。<br>本文件的重点是明确以下方面的要求:</p><ul><li>LT 与其他 CP:BSW 模块 / AP: 功能集群的接口</li><li>与 CP:RTE/VFB/AP:ARA 的接口追踪</li><li>与 CP:SWCS/AP: 应用程序的接</li><li>日志和跟踪消息的传输和存储格</li><li>LT 通信模块的内部接口</li><li>LT 的一般配置</li></ul><p>该文件没有为以下方面规定要求:</p><ul><li>LT 通信模块上的通信传输层</li></ul><h1 id="4-requirements-specification"><a class="anchor" href="#4-requirements-specification">#</a> <strong>4 Requirements Specification</strong></h1><h2 id="41-functional-overview"><a class="anchor" href="#41-functional-overview">#</a> <strong>4.1</strong> <strong>Functional Overview</strong></h2><blockquote><p>LT provides a generic Logging and Tracing functionality for Applications and other modules.</p></blockquote><p>LT 为应用程序和其他模块提供了通用的日志和追踪功能。</p><blockquote><p>Generally, LT provides the following functionalities:</p></blockquote><p>般来说，LT 提供以下功能:</p><blockquote><ul><li><p>Logging</p><ul><li><p>Logging of errors, warnings and info messages from AUTOSAR Applications, providing a standardized AUTOSAR interface</p><p>记录来自 AUTOSAR 应用程序的错误、警告和信息消息，提供标准化的 AUTOSAR 接口</p></li><li><p>Gather all LT messages from all AUTOSAR Applications Level and Middleware Level software in a centralized AUTOSAR module (DLT).</p><p>在一个集中的 AUTOSAR 模块 (DLI) 中，从所有的 AUTOSAR 应用层和中间件层软件中收集所有 LT 消息。</p></li><li><p>Log messages from DET[3], DEM[4] (Classic Platform)</p><p>DET 发送的日志消息 [3],DEM<a href="%E7%BB%8F%E5%85%B8%E5%B9%B3%E5%8F%B0">4</a></p></li></ul></li><li><p>Tracing</p><ul><li><p>Trace RTE/VFB ([5]) (Classic Platform)</p><p>追踪 RTE/VFB ([5])(经典平台)</p></li></ul></li><li><p>Control</p><ul><li><p>Enable/Disable individual LT messages</p><p>启用 / 禁用单个 LT 消息</p></li><li><p>Control trace levels individually by back channel</p><p>通过 back channel 单独控制 trace 级别</p></li></ul></li><li><p>Generic</p><ul><li><p>LT available during debugging and production phase</p><p>LT 可在调试和生产阶段使用</p></li><li><p>Access over standard diagnosis or platform specific test interface</p><p>通过标准诊断或平台特定测试接口访问</p></li><li><p>Security mechanisms to prevent misuse in production phase</p><p>防止生产阶段误用的安全机制</p></li></ul></li></ul><p>In addition, the following functionalities are provided for the Adaptive Platform:</p><ul><li><p>Timestamps</p><ul><li><p>In case a timestamp is required, the LT module provides the possibility of time-stamping both the logging as well as the tracing messages.</p><p>如果需要时间戳，LT 模块提供了对日志记录和跟踪消息进行时间戳的可能</p></li><li><p>Such timestamping is handled directly by the LT module, without any needed intervention from the application.</p><p>此时间戳由 LT 模块直接处理，不需要应用程序进行任何必要的干预。</p></li></ul></li><li><p>Application communication tracing</p><ul><li><p>The LT module is capable of handling the tracing of the communication flow between multiple Adaptive Applications without further interaction of the applications being necessary.</p><p>LT 模块能够处理多个自适应应用程序之间的通信流的跟踪，而不需要应用程序的进一步交互。</p></li></ul></li></ul></blockquote><h2 id="42-functional-requirements"><a class="anchor" href="#42-functional-requirements">#</a> <strong>4.2</strong> <strong>Functional Requirements</strong></h2><h3 id="421-log-and-trace-interfaces"><a class="anchor" href="#421-log-and-trace-interfaces">#</a> <strong>4.2.1</strong> <strong>Log and trace interfaces</strong></h3><blockquote><p><strong>Logging shall support initialization and registration.</strong></p><p><strong>Logging shall enable applications to provide meta information.</strong></p><p><strong>Logging shall enable applications to provide Logging Information.</strong></p><p><strong>Logging shall enable tracing of communication between applications.</strong></p><p><strong>Logging shall support grouping of Logging Information.</strong></p><p><strong>Logging shall allow to select the destination of logging information.</strong></p><p><strong>Logging shall provide early logging capabilities.</strong></p><p><strong>The LT shall transmit log and trace messages from several sources over a communication interface to a receiving external client.</strong></p><p><strong>All log and trace messages sent by an ECU shall have a standardized transmission format and a standardized storage format.</strong></p></blockquote><p><strong>Interface for Applications</strong></p><blockquote><p><strong>Applications shall have the possibility to send log or trace messages to the LT module.</strong></p><p><strong>Logging shall provide an interface for logging information.</strong></p><p><strong>Logging shall be able to handle raw buffer content as logging information.</strong></p><p><strong>Logging shall enable applications to check the current severity level.</strong></p><p><strong>Logging shall provide conversion functions for hexadecimal and binary values.</strong></p><p><strong>The LT shall provide the actual set of log levels and the trace status to an Application.</strong></p><p><strong>For each Application the interface to LT shall be configured.</strong></p></blockquote><p><strong>DET trace interface</strong></p><blockquote><p><strong>Trace events from errors generated by BSW and Applications shall be forwarded to the LT module.</strong></p></blockquote><p><strong>DEM trace interface</strong></p><blockquote><p><strong>The DEM shall forward error events to the LT module.</strong></p></blockquote><p><strong>RTE/VFB trace interface</strong></p><blockquote><p><strong>RTE shall provide an interface for LT to trace RTE/VFB calls.</strong></p><p><strong>The LT shall implement an interface to trace the RTE/VFB.</strong></p><p><strong>A global switch shall be defined to switch on and off the RTE tracing.</strong></p><p><strong>The LT shall implement the handling of the RTE/VFB trace events.</strong></p><p><strong>LT shall provide a solution to trace events linked to implicit communication mechanism.</strong></p></blockquote><h3 id="422-format-of-log-and-trace-message"><a class="anchor" href="#422-format-of-log-and-trace-message">#</a> <strong>4.2.2</strong> <strong>Format of log and trace message</strong></h3><blockquote><p><strong>The transmitted data shall be packetized.</strong></p><p><strong>The transport format shall be binary</strong></p><p><strong>The format shall deal with Big and Little Endianess.</strong></p><p><strong>Each log and trace message shall contain a timestamp, which will be added to the message during reception of the message in the LT module.</strong></p><p><strong>A global message counter shall be implemented, to detect messages loss.</strong></p><p><strong>For each log message, a log level shall be provided.</strong></p><p><strong>The log and trace message shall contain a parameter, which represents the source of the log and trace message.</strong></p><p><strong>There shall be a logical grouping for log messages by using different identifiers.</strong></p><p><strong>Each ECU shall have its unique ECU ID.</strong></p><p><strong>The payload shall transport the parameters of a log and trace message.</strong></p><p><strong>It shall be possible to transmit the parameters in a raw format.</strong></p><p><strong>There shall be the possibility to transmit the parameters with additional information about themselves (self-description).</strong></p><p><strong>It shall be possible to transmit ASCII text in log or trace messages.</strong></p><p><strong>The data in non-verbose mode shall be described by an extra file</strong></p><p><strong>Each message in non-verbose mode shall have a unique Message ID significant for identifying the source of the tracing.</strong></p></blockquote><h3 id="423-transport-interfaces"><a class="anchor" href="#423-transport-interfaces">#</a> <strong>4.2.3</strong> <strong>Transport interfaces</strong></h3><p><strong>Generic</strong></p><blockquote><p><strong>A control message shall be implemented to permit the external client to evaluate the round trip time.</strong></p><p><strong>A protection against unauthorized access in production phase shall be provided.</strong></p><p><strong>Logging shall be able to monitor and shape the amount of LT log and trace events.</strong></p><p><strong>The LT shall be configurable at runtime.</strong></p><p><strong>A protocol shall be implemented to be able to set and query the trace status and log levels of log and trace sources of each ECU.</strong></p><p><strong>A list of all log and trace sources of an ECU shall be accessible from the external client.</strong></p></blockquote><p><strong>Communication interface</strong></p><blockquote><p><strong>LT shall support a generic API for communicating over a LT communication module.</strong></p></blockquote><p><strong>DCM transport interface</strong></p><blockquote><p><strong>The DCM shall provide an interface for LT to transport log and trace messages over a diagnostic session.</strong></p></blockquote><h3 id="424-operational-function"><a class="anchor" href="#424-operational-function">#</a> <strong>4.2.4</strong> <strong>Operational function</strong></h3><p><strong>Initialization and shutdown</strong></p><blockquote><p><strong>The LT shall provide a buffer for storing log and trace messages before initialization</strong></p></blockquote><p><strong>Normal operation</strong></p><blockquote><p><strong>There shall be a buffer to store log and trace message locally.</strong></p><p><strong>A mechanism shall be implemented to be able to set the trace status and log levels of registered Application IDs and context IDs of each Application.</strong></p><p><strong>The LT shall provide the possibility to store configuration data in a persistent way.</strong></p><p><strong>The LT component shall be able to filter log and trace messages.</strong></p><p><strong>AUTOSAR Log and Trace shall support harmonized logging.</strong></p></blockquote><h2 id="43-non-functional-requirements"><a class="anchor" href="#43-non-functional-requirements">#</a> <strong>4.3</strong> <strong>Non-Functional Requirements</strong></h2><blockquote><p><strong>[RS_LT_00041] LT shall be a central software component for the log and trace functionality.</strong></p><p><strong>[RS_LT_00042] The Log and trace SW component shall be part of the system during production phase.</strong></p><p><strong>[RS_LT_00059] LT shall provide an interface for trace points.</strong></p><p><strong>[RS_LT_00060] LT shall send modeled trace messages</strong></p><p><strong>[RS_LT_00061] Tracing shall be configurable at compile time</strong></p><p><strong>[RS_LT_00062] LT shall be configurable to use ARTI to process the tracing information</strong></p></blockquote><hr><h1 id="四-timesensitivenetworkfeatures"><a class="anchor" href="#四-timesensitivenetworkfeatures">#</a> 四、TimeSensitiveNetworkFeatures</h1><h1 id="1-introduction"><a class="anchor" href="#1-introduction">#</a> <strong>1 Introduction</strong></h1><h2 id="11-objectives"><a class="anchor" href="#11-objectives">#</a> <strong>1.1</strong> <strong>Objectives</strong></h2><blockquote><p>Time-Sensitive Networking (TSN) is a set of standards specified by [1, IEEE 802.1 TSN Task Group]. It provides end-to-end data transmission with extremely low latency and high reliability over Ethernet.</p></blockquote><p>时间敏感网络 (TSN) 是由 [1, IEEE 802.1 TSN Task Group] 指定的一组标准，它通过以太网提供端到端数据传输，具有极低的延迟和高可靠性。</p><blockquote><p>As a result, TSN is considered as one of the key enabler for deterministic communication on standard Ethernet, which can further be used to accurate timing and guarantee data delivery for automotive Ethernet.</p></blockquote><p>因此，TSN 被认为是标准以太网确定性通信的关键使能器之一，可以进一步用于精确定时和保证汽车以太网的数据传输。</p><h1 id="4-time-sensitive-network-in-autosar"><a class="anchor" href="#4-time-sensitive-network-in-autosar">#</a> <strong>4 Time Sensitive Network in AUTOSAR</strong></h1><h2 id="41-constraints-and-assumptions"><a class="anchor" href="#41-constraints-and-assumptions">#</a> <strong>4.1</strong> <strong>Constraints and Assumptions</strong></h2><blockquote><p>AUTOSAR does not support the following TSN features:</p><ul><li>time aware shapers</li><li>active stream identification</li><li>frame replication</li></ul><p>AUTOSAR assumes that all Ethernet switches in the network are VLAN-aware. VLAN unaware Ethernet switches are not supported.</p></blockquote><p>AUTOSAR 假设网络中的所有以太网交换机都了解 VLAN，不支持不了解 VLAN 的以太网 Switch。</p><h2 id="42-overview"><a class="anchor" href="#42-overview">#</a> <strong>4.2</strong> <strong>Overview</strong></h2><blockquote><p>TSN is a set of IEEE 802 standards based on Ethernet. It specifies functions to ensure the transmission with bounded low latency and high availability for applications in automotive or industrial control facilities.</p></blockquote><p>TSN 是基于以太网的一套 IEEE802 标准，它规定了功能，以确保汽车或工业控制设施中的应用程序具有有限低延迟和高可用性。</p><p><img data-src="../../../img.assets/24-11-04%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%B0%8F%E6%9F%B4%E5%B8%A6%E4%BD%A0%E5%AD%A6%E4%B9%A0AutoSar%E7%B3%BB%E5%88%97%E4%B8%89%E3%80%81%E6%A0%87%E5%87%86%E5%92%8C%E8%A7%84%E8%8C%83%E7%AF%87%EF%BC%885%EF%BC%89CommunicationManagement/image-20240919143446108.png" alt="image-20240919143446108"></p><blockquote><p>The deterministic transmission of time-critical frames may be achieved by using TSN features of high reliability, low delay, zero packet loss through traffic shaping, seamless redundant transmission, filtering, priority-based scheduling, ingress policing and rate limitation.</p></blockquote><p>通过<strong>流量整形</strong>、<strong>无缝冗余传输</strong>、<strong>过滤</strong>、基于<strong>优先级的调度</strong>、<strong>入口保护</strong>和<strong>速率限制</strong>，可以实现时间关键帧的高可靠性、低延迟、零包丢失的确定性传输。</p><p><img data-src="../../../img.assets/24-11-04%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%B0%8F%E6%9F%B4%E5%B8%A6%E4%BD%A0%E5%AD%A6%E4%B9%A0AutoSar%E7%B3%BB%E5%88%97%E4%B8%89%E3%80%81%E6%A0%87%E5%87%86%E5%92%8C%E8%A7%84%E8%8C%83%E7%AF%87%EF%BC%885%EF%BC%89CommunicationManagement/image-20240919142851967.png" alt="image-20240919142851967"></p><h3 id="421-ieee-8021as"><a class="anchor" href="#421-ieee-8021as">#</a> <strong>4.2.1</strong> <strong>IEEE 802.1AS</strong></h3><blockquote><p>The basis of TSN standards is global time synchronization. It specifies the clock synchronization mechanism with switches as key nodes based on the data link layer.</p></blockquote><p>TSN 标准的基础是全球<strong>时间同步</strong>。它规定了基于数据链路层的以交换机为关键节点的时钟同步机制。</p><blockquote><p>IEEE802.1AS [4, IEEE Std 802.1AS] was mainly extended from the simplified version of the IEEE 1588 (Precision Time Protocol) and it is more suitable for communication transmission scenarios that require high real-time precision in vehicle networks.</p></blockquote><p>IEEE802.1AS [4, IEEE Std 802.1AS] 主要是从 IEEE 1588 (精确时间协议) 的简化版本扩展而来，更适合车辆网络中需要高实时精度的通信传输场景。</p><h3 id="422-ieee-8021qav"><a class="anchor" href="#422-ieee-8021qav">#</a> <strong>4.2.2</strong> <strong>IEEE 802.1Qav</strong></h3><blockquote><p>IEEE 802.1Qav [6, IEEE Std 802.Qav] can be used to ensure that traditional asynchronous Ethernet data traffic does not interfere with AVB’s real-time audio and video streams.</p></blockquote><p>IEEE 802.1Qav [6, IEEE Std 802.Qav] 可以用来确保传统的异步以太网数据流量不干扰 AVB 的实时音频和视频流。</p><blockquote><p>To avoid competition for network resources between ordinary data traffic and AVB traffic, the AVB switch differentiates time-sensitive audio and video streams from ordinary data streams, queues real-time frames and asynchronous frames separately, and assigns the highest priority to real-time frames.</p></blockquote><p>为了避免普通数据流量和 AVB 流量对网络资源的竞争，AVB 交换机将时间敏感的音频和视频流与普通数据流区分开来，分别排队实时帧和异步帧，并将最高优先级分配给实时帧。</p><blockquote><p>Therefore a so-called Credit Based Shaper (CBS) could be used for bandwidth limitation to convergence time-sensitive and time-insensitive traffic.</p></blockquote><p>因此，所谓的信贷基于整形器 (CBS) 可以用于带宽限制收敛时间敏感和时间不敏感的流量。</p><h3 id="423-ieee-8021qbv"><a class="anchor" href="#423-ieee-8021qbv">#</a> <strong>4.2.3</strong> <strong>IEEE 802.1Qbv</strong></h3><blockquote><p>IEEE 802.1Qbv [7, IEEE Std 802.Qbv] specifies the feature of time-aware shaping, which allows the scheduling of the transmission of frames with different priorities in time-triggered windows.</p></blockquote><p>IEEE 802.1Qbv [7, IEEE Std 802.Qbv] 指定了时间感知整形功能，该功能允许在时间触发窗口中调度具有不同优先级的帧的传输。</p><blockquote><p>Time-aware shaping divides time into fixed windows, and schedules the transmission of frames within these windows based on their priority.</p></blockquote><p>时间感知成形将时间划分为固定窗口，并根据这些窗口的优先级安排帧的传输。</p><blockquote><p>Time-critical frames are normally given with higher priority and transmitted in a separate window, while lower priority frames are transmitted in the remaining time.</p></blockquote><p><strong>时间临界帧</strong>通常具有较高的优先级，在单独的窗口中传输，而低优先级的帧则在剩余时间中传输。</p><h3 id="424-ieee-8021qcc"><a class="anchor" href="#424-ieee-8021qcc">#</a> <strong>4.2.4</strong> <strong>IEEE 802.1Qcc</strong></h3><blockquote><p>Most networks need to be configured while the network is down, which is not suitable for applications such as in industrial control and automotive network communication.</p></blockquote><p>大多数网络需要在网络关闭时进行配置，这不适用于工业控制和汽车网络通信等应用。</p><blockquote><p>IEEE 802.1Qcc [8, IEEE Std 802.Qcc] can be used to introduce a Centralized Network Configuration (CNC) and a Centralized User Configuration (CUC) to implement dynamic network configuration, and flexibly configure new devices and data flows when the network is running.</p></blockquote><p>IEEE 802.1Qcc [8, IEEE Std 802.Qcc] 可用于引入<strong>集中式网络配置 (CNC)<strong> 和</strong>集中式用户配置 (CUC)</strong>，以实现动态网络配置，并在网络运行时灵活配置新设备和数据流。</p><h2 id="43-usage-of-shapers-in-the-network"><a class="anchor" href="#43-usage-of-shapers-in-the-network">#</a> <strong>4.3</strong> <strong>Usage of Shapers in the Network</strong></h2><h3 id="431-asynchronous-traffic-shaping"><a class="anchor" href="#431-asynchronous-traffic-shaping">#</a> <strong>4.3.1</strong> <strong>Asynchronous Traffic Shaping</strong></h3><p><strong>Overview</strong></p><blockquote><p>Asynchronous Traffic Shaping (ATS) is specified by [9, IEEE Std 802.1Qcr-2020] and provides a traffic shaping concept that can provide bounded latencies for data streams in a network.</p></blockquote><p>异步流量整形 (ATS) 由 [9, IEEE Std 802.1Qcr-2020] 规定，并提供了一个流量整形概念，可以为网络中的数据流提供有界延迟。</p><blockquote><p>It avoids bursts and provides a fair usage of the egress port for streams arriving on different ingress ports. This is a main difference between the Credit Based Shaper (CBS) and ATS, as CBS only considers a particular traffic class of an egress port.</p></blockquote><p>它避免了突发，并为到达不同入站端口的流提供了出站端口的公平使用。这是基于信用的整形器 (CBS) 和 ATS 之间的主要区别，因为 CBS 仅考虑出站端口的特定流量类别。</p><blockquote><p>The algorithm is loosely based on the token bucket algorithm and uses similar terminology for the configuration parameters.</p></blockquote><p>该算法大体上基于令牌桶算法，并对配置参数使用类似的术语。</p><blockquote><p>ATS is divided into two major functional blocks, one, the ”ATS Eligibility Time Assignment” situated on the ingress side of a bridge, operating on streams identified by the stream filters using the stream_handle and priority, includes the computational part of the shaping function.</p></blockquote><p>ATS 分为两个主要功能块，一个 “ATS 资格时间分配” 位于桥梁的入口侧，使用流过滤器、流句柄和优先级对识别的流进行操作，包括整形函数的计算部分。</p><blockquote><p>This means it calculates an eligibility time for every frame received based on the ATS algorithm. The eligibility time is the time when a frame is eligible for transmission on the egress port.</p></blockquote><p>这意味着它根据 ATS 算法为接收到的每个帧计算合格时间，合格时间是指一个帧有资格在出口端口传输的时间。</p><blockquote><p>The other functional block, the ”ATS transmission selection algorithm” is situated on the egress side and shapes the traffic according to the results calculated by the ”ATS Eligibility Time Assignment”.</p></blockquote><p>另一个功能块，“ATS 传输选择算法” 位于出口侧，并根据 “ATS 资格时间分配” 计算的结果来形成流量。</p><blockquote><p>As the eligibility times of frames of streams from different receive ports can be in non-decreasing order, ATS queues need to support non-FIFO queues.</p></blockquote><p><strong>Guidance on the configuration</strong></p><p>之后再细化</p><h3 id="432-credit-based-shaper"><a class="anchor" href="#432-credit-based-shaper">#</a> <strong>4.3.2</strong> <strong>Credit Based Shaper</strong></h3><p><strong>Overview</strong></p><blockquote><p>The Credit Based Shaper (CBS) is specified by [6, IEEE Std 802.Qav] and provides a traffic shaping concept for high priority, high data rate streams.</p></blockquote><p>基于信用整形器 (CBS) 是指定的 [6, IEEE Std 802.Qav] ，并提供了一个高优先级，高数据速率流的流量整形概念。</p><blockquote><p>It was specified as part of the Audio Video Bridging (AVB) standards. The behavior is similar to ATS, but the CBS is operating only on Traffic Classes on the egress side of a bridge.</p></blockquote><p>它被指定为音视频桥接 (AVB) 标准的一部分。其行为类似于 ATS 但 CBS 仅在桥梁出口侧的交通类别上运行。</p><blockquote><p>Therefore, there is no differentiation between individual streams within the traffic class as well as different ingress ports.</p></blockquote><p>因此，在交通类别的单个流以及不同的入境口岸之间没有区别。</p><blockquote><p>As a consequence, the Credit Based Shaper is strictly operating on the order frames are received on all ports, there is no reordering of frames received on different ports.</p></blockquote><p>因此，基于信用的整形器是严格操作在所有端口接收的顺序帧，没有在不同端口接收到的帧的重新排序。</p><blockquote><p>The Credit Based Shaper minimizes bursts and therefore protects lower priority traffic from the high priority CBS shaped traffic.</p></blockquote><p>基于信用的塑形器最小化突发事件，因此保护低优先级的流量从高优先级的 CBS 塑形流量。</p><blockquote><p>The CBS only exists as one functional block (per traffic class) that is located on the egress side of a bridge port and makes frames available for transmission selection based on a credit value.</p></blockquote><p>CBS 仅作为一个功能区块存在 (每种交通类别)，位于桥梁 port 出口侧，为基于信用值的传输选择提供框架。</p><blockquote><p>If there is zero or positive credit, frames are available for transmission, in case there is negative credit, frames of the associated traffic class are not available for transmission selection.</p></blockquote><p>如果信用为零或正信用，则可使用帧进行传输，如果信用是负的，则不可使用关联的通信类别的帧进行传输选择。</p><blockquote><p>The idleSlope is the main parameter that defines the rates with which credit is accumulated and reduced, and thereby it directly controls the data rate of the assigned traffic class on a port.</p></blockquote><p>空闲斜率是定义信用累积和减少速率的主要参数，因此它直接控制 port 上指定的交通类别的数据速率。</p><h2 id="44-ensure-accuracy-of-time-synchronization"><a class="anchor" href="#44-ensure-accuracy-of-time-synchronization">#</a> <strong>4.4</strong> <strong>Ensure Accuracy of Time Synchronization</strong></h2><p><strong>Recommendations to support accuracy in an Ethernet network</strong></p><p>以太网中支持准确性的建议</p><p><strong>Parts in Documents which Reflect Accuracy</strong></p><blockquote><p>In Time Synchronization Protocol Specification [10]:</p><p>Time Master and Time Slave shall work with a Time Base reference clock accuracy as defined in [4, IEEE 802.1 AS], ANNEX B.1.2 "Time measurement granularity".</p></blockquote><p>时间同步协议规范 [10]:<br>时间主控器和时间从控器应使用 [4, IEEE 802.1 AS] 附件 B.1.2 “时间测量粒度” 中定义的时基基准时钟精度工作。</p><blockquote><p>In Specification of Time Synchronization over Ethernet [11]:</p><p>Automotive systems requiring a common Time Base for ECUs regardless of which bus system the ECUs are connected to.</p></blockquote><p>以太网时间同步规范 [111:<br>汽车系统要求 ECU 的通用时间基准，无论 ECU 连接到哪个总线系统。</p><p><strong>System requirements</strong></p><blockquote><p>TSN uses gPTP protocol (IEEE 802.1AS) to get precise timestamps for the nodes in the Network. IEEE 802.1AS also targets at accuracy of +/-500ns between any two nodes over 7 hops for Audio Video Bridging using 100 Mb/s links.</p></blockquote><p>TSN 使用 gPTP 协议 (IEEE802.1AS) 为网络中的节点获取精确的时间。IEEE 802.1AS 还针对使用 100Mb/s 链路进行音频视频桥接的任何两个节点之间的精度为 +/-500 ns。</p><blockquote><p>That means, the hardware has to support the global time on Ethernet with an end to end accuracy of +/- 500ns, where end to end describes a network path from a data producer to a data consumer (e.g. from audio source to an audio sink).</p></blockquote><p>这意味着，硬件必须支持以太网上的全局时间，端到端精度为士 500ns，其中端到端描述从数据生产者到数据消费者 (例如从音频源到音频汇) 的网络路径。</p><h2 id="45-measurement-of-the-time-synchronization-quality-accuracy"><a class="anchor" href="#45-measurement-of-the-time-synchronization-quality-accuracy">#</a> <strong>4.5</strong> <strong>Measurement of the Time Synchronization Quality (Accuracy)</strong></h2><p><strong>Overview</strong></p><blockquote><p>The quality of time synchronization needs to be measured in order to assess if devices meet requirements for gPTP recovered clock quality.</p></blockquote><p>需要测量时间同步的质量，以评估设备是否满足 gPTP 恢复的时钟质量的要求。</p><blockquote><p>The traditional approach to measure the accuracy of the clock synchronization is the 1 Pulse Per Second (1PPS) method.</p></blockquote><p>测量时钟同步精度的传统方法是每秒 1 脉冲 (1PPS) 法。</p><blockquote><p>The PPS signal must be driven by a hardware clock in all participating devices so that it generates a pulse every full second.</p></blockquote><p>PPS 信号必须由所有参与设备的硬件时钟驱动，以便每整秒产生一个脉冲。</p><blockquote><p>If this is done for multiple hardware clocks in a distributed system their synchronization accuracy can be checked on a measurement device like a scope by measuring the distance of PPS pulses originating from different devices.</p></blockquote><p>如果在分布式系统中为多个硬件时钟执行此操作，则可以通过测量来自不同设备的 PPS 脉冲的距离来检查它们的同步准确性，例如示波器。</p><blockquote><p>After their clocks have been correctly synchronized, the PPS pulses triggered every second should only have a marginal time distance in a successful scenario.</p></blockquote><p>在它们的时钟正确同步之后，在成功的情况下，每秒触发的 PPS 脉冲应该只有边际时间距离。</p><blockquote><p>However, the 1PPS method is not feasible for automotive environment, where using a separate output pin for generating the 1PPS signal on the ECU is considered costly.</p></blockquote><p>然而，1PPS 方法在汽车环境中不可行，因为使用单独的输出引脚在 ECU 上产生 1PPS 信号被认为是昂贵的。</p><blockquote><p>Furthermore, static offset in the internal clock of a slave may exist and can be canceled out by an opposite static offset in the logic that drives the 1PPS output.</p></blockquote><p>此外，slave 内部时钟中的静态偏移可能存在，并且可以被驱动 1PPS 输出的逻辑中的相反的静态偏置抵消。</p><blockquote><p>This will result in an error condition that cannot be observable by using 1PPS measurement method.</p></blockquote><p>这将导致使用 1PPS 测量方法无法观察到的误差情况。</p><blockquote><p>In order to mitigate the flaws from 1PPS measurement, Advance methods like Ingress Reporting Method and Reverse Sync Method may be considered for alternative measurement methods. More details for Ingress Reporting Method and Reverse Sync Method, please refer to [12, 802.1AS Recovered Clock Quality Testing].</p></blockquote><p>为了减轻 1PPS 测量的缺陷，可以考虑使用 Ingress ReportingMethod 和 Reverse Sync Method 等先进的方法作为替代的测量方法。有关 IngressReporting Method 和反向同步方法的更多详细信息，请参见 [12, 802.1AS Recovered Clock Quality Testing]。</p><p><strong>Usage of PPS</strong></p><hr><h1 id="五-macsec"><a class="anchor" href="#五-macsec">#</a> 五、MACsec</h1><h1 id="1-scope-of-document-3"><a class="anchor" href="#1-scope-of-document-3">#</a> <strong>1 Scope of Document</strong></h1><blockquote><p>This document specifies requirements on MACsec protocols in the AUTOSAR Foundation.</p><p>The motivation is to specify the usage of:</p><ul><li>IEEE 802.1AE (also known as MACsec) protocol.</li><li>MACsec Key Agreement protocol (standardized in IEEE 802.1X).</li></ul></blockquote><p>本文档指定了 AUTOSAR 基金会对 MACsec 协议的要求。目的是明确下列各项的用法:</p><ul><li>IEEE802.1AE (也称为 MACsec) 协议。</li><li>MACsec 密钥协议协议 (在 IEEE802.1X 中标准化)。</li></ul><h1 id="4-requirements-specification-2"><a class="anchor" href="#4-requirements-specification-2">#</a> <strong>4 Requirements Specification</strong></h1><h2 id="41-functional-overview-2"><a class="anchor" href="#41-functional-overview-2">#</a> <strong>4.1</strong> <strong>Functional Overview</strong></h2><blockquote><p>IEEE 802.1AE (also known as MACsec) is a network security standard that operates at the medium access control layer and defines connectionless data confidentiality and integrity for media access independent protocols.</p></blockquote><p>IEEE 802.1AE (也称为 MACsec) 是一种在媒体访问控制层运行的网络安全标准，为媒体访问独立协议定义了无连接数据机密性和完整性。</p><blockquote><p>The 802.1AE standard specifies the implementation of MAC Security Entities (SecY), which are part of the stations attached to the same LAN, providing secure MAC service to the client. The standard defines:</p></blockquote><p>802.1AE 标准规定了 MAC 安全实体 (SecY) 的实现，它们是连接到同一局域网的站点的一部分，为客户端提供安全的 MAC 服务。该标准定义了:</p><blockquote><ul><li><p>MACsec frame format, which is a valid Ethernet frame with a specific EtherType and includes the following additional fields:</p><p>MACsec 帧格式，它是具有特定 EtherType 的有效以太网帧，并包括以下附加字段:</p><ul><li><p>Security Tag, which is an extension of the EtherType.</p><p>安全标签，它是 EtherType 的扩展。</p></li><li><p>Message authentication code (ICV).</p><p>消息身份验证码 (ICV)</p></li></ul></li><li><p>Secure Connectivity Associations (CAs) that represent groups of stations connected via unidirectional Secure Channels.</p><p>安全连接关联 (CAs)，表示通过单向安全通道连接的站组。</p></li><li><p>Security Associations (SAs) within each Secure Channel. Each association uses its own key (SAK). More than one association is permitted within the channel for the purpose of key change without traffic interruption (standard requires devices to support at least two).</p><p>每个安全通道中的安全关联 (SAs)。每个关联使用自己的密钥 (SAK)。通道中允许一个以上的关联，以便在不中断通信的情况下更改密钥 (标准要求设备至少支持两个)</p></li><li><p>A default cipher suite of GCM-AES-128 (Galois/Counter Mode of Advanced Encryption Standard cipher with 128-bit key)</p><p>一个默认的 GCM-AES-128 密码套件 (具有 128 位密钥的高级加密标准密码的 Galois/Counter 模式)</p><ul><li>GCM-AES-256 using a 256-bit key is supported</li></ul></li></ul></blockquote><p><img data-src="../../../img.assets/24-11-04%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%B0%8F%E6%9F%B4%E5%B8%A6%E4%BD%A0%E5%AD%A6%E4%B9%A0AutoSar%E7%B3%BB%E5%88%97%E4%B8%89%E3%80%81%E6%A0%87%E5%87%86%E5%92%8C%E8%A7%84%E8%8C%83%E7%AF%87%EF%BC%885%EF%BC%89CommunicationManagement/image-20240920132524110.png" alt="image-20240920132524110"></p><blockquote><p>MACsec allows unauthorized LAN connections to be identified and excluded from communication within the network. In common with IPsec and TLS, MACsec defines a security infrastructure to provide data confidentiality, data integrity, and data origin authentication.</p></blockquote><p>MACsec 允许识别未经授权的 LAN 连接，并将其排除在网络内的通信之外。与 IPsec 和 TLS 一样，MACsec 定义了一个安全基础结构，可提供数据保密性、数据完整性和数据源身份验证。</p><blockquote><p>By assuring that a frame comes from the station that claimed to send it (this might require additional mechanisms), MACsec can even mitigate attacks on Layer 2 protocols that cannot be protected otherwise. A scenario in which MACsec protects a layer 2 attack, is in case an intruder installs a device in the cable harness to launch a man-in-the-middle attack.</p></blockquote><p>通过确保帧来自声称发送该帧的站 (这可能需要其他机制)，MACsec 甚至可以减轻无法以其他方式保护的 2 层协议的攻击。MACsec 保护 2 层攻击的情况是，如果入侵者在电缆线束中安装设备以发起中间人攻击。</p><blockquote><p>In order to recognize participants belonging to the same Secure Connectivity Association (CAs), establish Secure Channels, and maintain them alive, the participants on the communication make use of the MACsec Key Agreement protocol (MKA). This protocol is described and specified in the IEEE 802.1X standard.</p></blockquote><p>为了识别属于同一安全连接 (CAs) 的参与者、建立安全通道并使其保持活动状态，通信中的参与者使用 MACsec 密钥协议 (MKA)。该协议在 IEEE 802.1X 标准中进行了描述和指定。</p><h3 id="411-motivation"><a class="anchor" href="#411-motivation">#</a> <strong>4.1.1</strong> <strong>Motivation</strong></h3><blockquote><p>AUTOSAR supports actually several protocols to establish a secure communication channel which provide data confidentiality, data integrity and data origin authentication over Ethernet (e.g. IPsec, TLS, SecOC).</p></blockquote><p>AUTOSAR 实际上支持几种协议，以建立安全通信通道，该通道在以太网 (例如 IPsec、TLS、SecOC) 上提供数据机密性、数据完整性和数据源身份验证。</p><blockquote><p>The TLS protocol aims primarily to provide privacy and data integrity between two communication peers.</p></blockquote><p>TLS 协议主要旨在提供两个通信同行之间的隐私和数据完整性。</p><blockquote><p>If more than two communication peers need to exchange data in integrity protected way, for each peer connection an own TLS connection must be setup.</p></blockquote><p>如果两个以上的通信对等方需要以受完整性保护的方式交换数据，则必须为每个对等方连接设置一个自己的 TLS 连接。</p><blockquote><p>TLS is application protocol independent; higher-level protocols can layer on top of TLS transparently. TLS needs for each application-based session an own setup connection, which leads to a resource overhead.</p></blockquote><p>TLS 是独立于应用程序协议的，更高级别的协议可以透明地叠加在 TLS 之上。TLS 需要为每个基于应用程序的会话设置自己的连接，从而导致资源开销。</p><blockquote><p>Each session needs an own database entry for the negotiated key, the session status, and other organizational information.</p></blockquote><p>每个会话都需要一个自己的数据库条目来存储商定的密钥、会话状态和其他组织信息。</p><blockquote><p>To avoid the overhead introduced by the large number of required TLS connections it is possible to push the secure communication channel one level down, to the IP layer.</p></blockquote><p>为了避免大量所需的 TLS 连接带来的开销，可以将安全通信通道向下推一级到 IP 层。</p><blockquote><p>To secure the IP layer IPsec was introduced. IPsec includes protocols for establishing mutual authentication between hosts at the beginning of a session and negotiation of cryptographic keys to use during the session.</p></blockquote><p>为了保证 IP 层的安全，引入了 IPsec 。IPsec 包括一些协议，用于在会话开始时在主机之间建立相互身份验证，以及谈判在会话期间使用的加密密钥。</p><blockquote><p>IPsec can protect data flows between a pair of hosts (host-to-host), between a pair of security gateways (network-to-network), or between a security gateway and a host (network-to-host).</p></blockquote><p>IPsec 可以保护一对主机 (主机对主机)、一对安全网关 (网络对网络) 或安全网关与主机 (网络对主机) 之间的数据流。</p><blockquote><p>IPsec uses cryptographic security services to protect communications over Internet Protocol (IP) networks. It supports network-level peer authentication, data-origin authentication, data integrity, data confidentiality (encryption), and replay protection (RFC 4301).</p></blockquote><p>IPsec 使用加密安全服务来保护 Internet 协议 (IP) 网络上的通信。它支持网络级对等认证、数据源认证、数据完整性、数据机密性 (加密) 和重播保护 (RFC4301)。</p><blockquote><p>The advantage of IPsec, compared to TLS, is the reduced overhead, because IPsec combines all secure application channels to a single secure channel. However, IPsec has a negative impact in the typical automotive use case.</p></blockquote><p>与 TLS 相比，IPsec 的优势在于减少了开销，因为 IPsec 将所有安全应用程序通道合并到一个安全通道中。然而，IPsec 在典型的汽车用例中会产生负面影响。</p><blockquote><p>Since IPsec connects on a host-to-host level and in the automotive world it is sometimes not possible to use the Internet model, as the connectivity between hosts is higher.</p></blockquote><p>由于 IPsec 是在主机对主机的级别上进行连接的，在汽车领域，由于主机之间的连接性较高，有时无法使用因特网模式。</p><blockquote><p>Here, the numbers of connections will also increase the resources and key negotiations time by power of two when an additional peer joins the secure communication network.</p></blockquote><p>在这里，当额外的同伴加入安全通信网络时，连接的数量也会增加资源和 key 协商时间的两倍。</p><blockquote><p>Avoiding this overhead again is possible pushing the secure channel one level down, to the MAC layer. With security on the MAC layer, protocols not based on IP as well as protocols using multicast can be protected.</p></blockquote><p>将安全通道向下推到 MAC 层可以再次避免这种开销。由于 MAC 层的安全性，不基于 IP 的协议以及使用组播的协议都可以得到保护。</p><blockquote><p>The goal is to introduce the IEEE 802.1AE (MACsec) solution to reduce overhead in a meshed network layout and to reduce the timing issue during key negotiation by reducing the number of peers (peer per Ethernet port instead of peer per UDP/TCP port) and avoiding higher network stack layers.</p></blockquote><p>目标是引入 IEEE 802.1AE (MACsec) 解决方案，以减少网状网络布局中的开销，并通过减少对等点数量 (每个以太网端口的对等点，而不是每个 UDP/TCP 端口的对等点) 和避免更高的网络堆栈层来减少密钥协商期间的时间问题。</p><blockquote><p>Implementing the MACsec protocol in the AUTOSAR platform provides options to establish secure communication channels between network nodes with confidentiality and/or integrity.</p></blockquote><p>在 AUTOSAR 平台中实现 MACsec 协议提供了在网络节点之间建立保密和 / 或完整的安全通信通道的选项。</p><blockquote><p>This document deals with the realization of the functionality either in a MACsec aware hardware (PHY or specific controller) and MACsec software solution, and the interoperability of the different solutions with each other.</p></blockquote><p>本文档涉及在 MACsec 意识硬件 (PHY 或特定控制器) 和 MACsec 软件解决方案中实现功能，以及不同解决方案之间的互操作性。</p><blockquote><p>In the AUTOSAR Classic Platform an adaption of the MAC layer is needed to implement the IEEE 802.1AE solution.</p></blockquote><p>在 AUTOSAR 经典平台中，需要对 MAC 层进行适配，以实现 IEEE 802.1AE 解决方案。</p><h3 id="412-functional-elements"><a class="anchor" href="#412-functional-elements">#</a> <strong>4.1.2</strong> <strong>Functional elements</strong></h3><blockquote><p><strong>The standards related with MACsec ([3, IEEE-802.1AE-2018] and [4, IEEE-802.1X-2020]) define the following functional elements:</strong></p></blockquote><p><strong>与 MACsec 相关的标准 ([3, IEEE-802.1AE-2018] 和 [4, IEEE-802.1X-2020]) 定义了以下功能元素:</strong></p><blockquote><ul><li>MAC Security Entities (SecYs): The SecY defines and identifies the authentic partners. A SecY implements the secure MAC Service to its clients. The MAC Security Entity is responsible of integrity protecting/validating and, if required, encrypt/decrypt to provide user data confidentiality. The SecY can be a SW or a HW implementation.</li></ul></blockquote><p>MAC 安全实体 (SeCYs):SecY 定义并识别真正的合作伙伴。SecY 向其客户端实现安全的 MAC 服务。MAC 安全实体负责完整性保护 / 验证，如果需要，加密 / 解密以提供用户数据的机密性。SecY 可以是软件或硬件实现。</p><blockquote><ul><li>Port Access Entities (PAEs): The PAE provides mutual authentication of partici pants belonging to a secure Connectivity Association (CA), and agrees the cryptographic keys and related parameters to meet the requirements of the SecY.</li></ul></blockquote><p>端口接入实体 (PAEs):PAE 为属于安全连接 (CA) 的参与者提供相互认证，并同意满足 SecY 要求的加密密钥和相关参数。</p><blockquote><ul><li>MAC Security Key Agreement Entities (KaYs): The KaY is the responsible for MKA within the PAE, it serves to setup a Secure Channel via a key agreement and monitors it during its life cycle.</li></ul></blockquote><p>MAC 安全密钥协议实体 (KaYs):KaY 是 PAE 中负责 MKA 的，它通过一个密钥协议建立一个安全信道，并在其生存周期内监视它。</p><blockquote><ul><li>Secure Channel (SC): Stores various configuration parameters, such as whether to perform replay protection, or whether to enable encryption.</li></ul></blockquote><p>安全通道 (SC): 存储各种配置参数，如是否执行重播保护，或是否启用加密。</p><blockquote><ul><li>Secure Association (SA): Security relationship under a Secure Channel. Each SA supports a different key. A Secure Channel supports several consecutive SAs to allow exchanging Keys without terminating the established Secure Channel.</li></ul></blockquote><p>安全关联 (SA): 安全通道下的安全关系。每个 SA 支持不同的密钥。安全通道支持多个连续的 SA，以允许在不终止已建立的 Secure Channel 的情况下交换密钥。</p><blockquote><ul><li>MKPDU: MACsec Key Agreement Protocol Data Units.</li></ul></blockquote><p>MKPDU:MACsec 密钥协议数据单元。</p><blockquote><ul><li>MACsec Protocol Data Units (MPDU): Defines the frame layout, which resides in the MAC layer (ISO/OSI layer 2).</li></ul></blockquote><p>MACsec 协议数据单元 (MPDU): 定义帧布局，它位于 MAC 层 (ISO/OSI 层 2)</p><blockquote><p><strong>The following terms identify roles within the protocol scenarios:</strong></p></blockquote><p><strong>以下术语标识协议场景中的角色:</strong></p><blockquote><ul><li>Participant: The personification of a single KaY’s participation in a given MKA instance. It transmits and receives MKPDUs protected by keys derived from a single given CAK and identified by a Connectivity Association Key Name (CKN).</li></ul></blockquote><p>参与者：单个 KaY 参与给定 MKA 实例的拟人化。它发送和接收由单个给定 CAK 派生并由连接性关联密钥名称 (CKN) 标识的密钥保护的 MKPDUS。</p><blockquote><ul><li>Key Server: Authenticated participant which generates and distributes the Secure Association Key to use in a Secure Channel. This participant decides the cipher suites to use.</li></ul></blockquote><p>密钥服务器：经过身份验证的参与者，生成并分发安全关联密钥，以便在安全通道中使用。该参与者决定使用密码套件。</p><blockquote><ul><li>Peer: Authenticated participant which does not possess the Key Server role.</li></ul></blockquote><p>Peer: 不具有密钥服务器角色的经过身份验证的参与者。</p><blockquote><p><strong>The following keys are required for the MACsec and MKA communication:</strong></p></blockquote><p><strong>MACsec 和 MKA 通信需要以下密钥:</strong></p><blockquote><ul><li>Secure Connectivity Association Key (CAK): Secret key possessed by members of a given CA. The CAK is identified by its respective secure Connectivity Association Key Name (CKN).</li></ul></blockquote><p>安全连接关联密钥 (CAK): 由给定 CA 成员所拥有的秘密密钥。CAK 由其各自的安全连接关联密匙名称 (CKN) 来识别。</p><blockquote><ul><li>Integrity Check Value Key (ICK): Key derived from the respective CAK and used to transmit/validate Integrity protected MKPDUs.</li></ul></blockquote><p>完整性检查值密钥 (ICK): 源自相应 CAK 的密钥，用于传输 / 验证受完整性保护的 MKPDUs</p><blockquote><ul><li>Key Encrypting Key (KEK): Key derived from the respective CAK and used to encrypt/decrypt a Secure Association Key (SAK).</li></ul></blockquote><p>密钥加密密钥 (KEK): 源自相应 CAK 的密钥，用于加密 / 解密安全关联密钥 (SAK)</p><blockquote><ul><li>Secure Association Key (SAK): Key used by the MACsec Entity (SecY) to integrity protect/validate and/or encrypt/decrypt MPDUs belonging to an specific Secure Association. The SAK is generated by one MKA participant (Key Server) and distributed during the MKA sequence.</li></ul></blockquote><p>安全关联密钥 (SAK):MACsec 实体 (SecY) 用于完整性保护 / 验证和 / 或加密 / 解密特定安全关联的 MPDUs 的密钥。SAK 由 MKA 参与者 (密钥服务器) 生成，并在 MKA 序列中分发.</p><p><img data-src="../../../img.assets/24-11-04%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%B0%8F%E6%9F%B4%E5%B8%A6%E4%BD%A0%E5%AD%A6%E4%B9%A0AutoSar%E7%B3%BB%E5%88%97%E4%B8%89%E3%80%81%E6%A0%87%E5%87%86%E5%92%8C%E8%A7%84%E8%8C%83%E7%AF%87%EF%BC%885%EF%BC%89CommunicationManagement/image-20240920154335223.png" alt="image-20240920154335223"></p><blockquote><p>As depicted in Figure 4.2, the MKA protocol consists of three phases:</p><ol><li>Authentication of participants. 身份验证</li><li>Session negotiation. 协商会话</li><li>Secure communication. 安全通信</li></ol></blockquote><p><strong>Authentication of participants</strong></p><blockquote><p>During the first phase of the MKA sequence, the MKA Entity (KaY) identifies other participants belonging to its configured CA.</p></blockquote><p>在 MKA 序列的第一阶段，MKA 实体 (KaY) 识别属于其配置的 CA 的其他参与者。</p><blockquote><p>In the current version of this document, only pre shared keys authentication is supported and the participants possess fixed roles in the MKA sequence.</p></blockquote><p>在本文档的当前版本中，只支持预共享密钥身份验证，参与者在 MKA 序列中拥有固定角色。</p><blockquote><p>The participants of the MKA communication will identify and authenticate each other based on the CKN and ICV of the MKPDUs exchanged.</p></blockquote><p>MKA 通信的参与者将根据所交换的 MKPDU 的 CKN 和 ICY 相互识别和认证。</p><blockquote><p>Once a participant can successfully identify and authenticate another participant belonging to the same CA, the member identifier of the other participant is included in its transmitted “Potential Peer List”.</p></blockquote><p>一旦参与者能够成功识别和验证属于同一 CA 的另一个参与者，另一个参与者的成员标识符将包含在其传输的 “潜在对等方列表” 中。</p><blockquote><p>If a participant recognizes another one and it is listed in the others “Potential peer List”, it will mark it as Live participant. The Member Identifier of the other participant will be included in the transmitted “Live Peer List”.</p></blockquote><p>如果参与者识别出另一个参与者并且它被列在 “潜在同行列表” 中，它将将其标记为 “现场参与者””。其他参与者的成员标识符将包含在传输的 “现场同行列表” 中。</p><p><strong>Session negotiation</strong></p><blockquote><p>In the current version of this document, dynamic election of the Key Server member is not supported, and therefore each participant will currently configure in advance its role in the communication.</p></blockquote><p>在本文档的当前版本中，不支持密钥服务器成员的动态选举，因此每个参与者将预先配置其在通信中的作用。</p><blockquote><p>The participants can share the supported cipher suites by means of the “MACsec Cipher Suites Announcement”. The participant with the Key Server role will select a cipher suite and generate and distribute a Secure Association Key accordingly.</p></blockquote><p>参与者可以通过 “MACsec 密码套件声明” 共享支持的密码套件。具有密钥服务器角色的参与者将选择密码套件，并相应地生成和分发安全关联密钥。</p><blockquote><p>Both participants shall communicate the readiness to transmit and receive MACsec protected PDUs with the “MACsec SAK Use” parameter set.</p></blockquote><p>双方参与者应通过 “MACsec SAK Use” 参数集通报发送和接收 MACsec 保护的 PDUs 的准备状态</p><blockquote><p>During the Secure Channel life time, it is possible to distribute new SAKs (and therefore create a new SA) without a communication interruption. The participants can also detect if the communication partner is alive.</p></blockquote><p>在安全通道有效期内，可以在不中断通信的情况下分发新的 SAKs (从而创建新的 SA)。参与者还可以检测通信伙伴是否存活。</p><blockquote><p>In case a cipher suite with Extended Packet Number (XPN) is selected, additional parameter sets are exchanged during the Secure Channel life time to keep the channel information up-to-date.</p></blockquote><p>如果选择了具有扩展数据包编号 (XPN) 的密码套件，则将在安全信道使用期内交换附加参数集，以保持信道信息的最新状态。</p><p><strong>Secure communication</strong></p><blockquote><p>After the identification, mutual authentication, distribution of keys, and installation of keys, the secure communication can start based on the parameters exchanged in the previous phases.</p></blockquote><p>在识别、相互认证、分配密钥和安装密钥之后，可以根据前几个阶段交换的参数开始安全通信。</p><h2 id="42-functional-requirements-2"><a class="anchor" href="#42-functional-requirements-2">#</a> <strong>4.2</strong> <strong>Functional Requirements</strong></h2><h3 id="421-standards-to-support"><a class="anchor" href="#421-standards-to-support">#</a> <strong>4.2.1</strong> <strong>Standards to support</strong></h3><blockquote><p><strong draft="">[FO_RS_MACsec_00001]</strong> <strong>MACsec Protocol support</strong></p><p><strong draft="">[FO_RS_MACsec_00002]</strong> <strong>MACsec Key Agreement Protocol support</strong></p></blockquote><h3 id="422-common-requirements"><a class="anchor" href="#422-common-requirements">#</a> <strong>4.2.2</strong> <strong>Common Requirements</strong></h3><blockquote><p><strong draft="">[FO_RS_MACsec_00003]</strong> <strong>Using MACsec on external communication links</strong></p><p><strong draft="">[FO_RS_MACsec_00004]</strong> <strong>Configure which Ethernet ports use MACsec</strong></p><p><strong draft="">[FO_RS_MACsec_00005]</strong> <strong>MACsec status control</strong></p><p><strong draft="">[FO_RS_MACsec_00006]</strong> <strong>MACsec support for Adaptive AUTOSAR Platform</strong></p><p><strong draft="">[FO_RS_MACsec_00007]</strong> <strong>Configuration of unprotected traffic (for Software-based MACsec)</strong></p><p><strong draft="">[FO_RS_MACsec_00008]</strong> <strong>Configuration of unprotected traffic (for Hardware-based MACsec)</strong></p><p><strong draft="">[FO_RS_MACsec_00009]</strong> <strong>MACsec Security Events</strong></p></blockquote><h3 id="423-requirements-on-macsec-protocol"><a class="anchor" href="#423-requirements-on-macsec-protocol">#</a> <strong>4.2.3</strong> <strong>Requirements on MACsec Protocol</strong></h3><blockquote><p><strong draft="">[FO_RS_MACsec_00010]</strong> <strong>Support of integrity and confidentiality</strong></p><p><strong draft="">[FO_RS_MACsec_00011]</strong> <strong>MAC Security TAG</strong></p><p>MACsec Entity (SW or HW) shall support MAC Security TAG (SecTAG) as defined in [3, IEEE-802.1AE-2018]. The SecTAG shall convey:</p><ul><li>TAG Control Information (TCI)</li><li>Association Number (AN)</li><li>Short Length (SL)</li><li>Packet Number (PN)</li><li>Secure Channel Identifier (SCI) - Optional</li></ul><p><strong draft="">[FO_RS_MACsec_00012]</strong> <strong>MACsec EtherType</strong></p><p><strong draft="">[FO_RS_MACsec_00017]</strong> <strong>Support of Extended Packet Number (XPN)</strong></p><p><strong draft="">[FO_RS_MACsec_00018]</strong> <strong>Secure Channel Identifier (SCI)</strong></p><p><strong draft="">[FO_RS_MACsec_00019]</strong> <strong>Secure Data</strong></p><p><strong draft="">[FO_RS_MACsec_00020]</strong> <strong>Integrity Check Value (ICV)</strong></p><p><strong draft="">[FO_RS_MACsec_00021]</strong> <strong>Protect function in software solution</strong></p><p><strong draft="">[FO_RS_MACsec_00022]</strong> <strong>Validation function in software solution</strong></p></blockquote><h3 id="424-requirements-on-mka-protocol"><a class="anchor" href="#424-requirements-on-mka-protocol">#</a> <strong>4.2.4</strong> <strong>Requirements on MKA Protocol</strong></h3><blockquote><p><strong draft="">[FO_RS_MACsec_00023]</strong> <strong>Support of MKA Packets</strong></p><p><strong draft="">[FO_RS_MACsec_00024]</strong> <strong>Pre-shared key support</strong></p><p><strong draft="">[FO_RS_MACsec_00025]</strong> <strong>Key selection via CKN</strong></p></blockquote><h3 id="425-cryptography-for-macsec-and-mka"><a class="anchor" href="#425-cryptography-for-macsec-and-mka">#</a> <strong>4.2.5</strong> <strong>Cryptography for MACsec and MKA</strong></h3><blockquote><p><strong draft="">[FO_RS_MACsec_00026]</strong> <strong>GCM-based cipher support</strong></p><p><strong draft="">[FO_RS_MACsec_00027]</strong> <strong>Support of AES ciphers with at least 128 bits of key length</strong></p><p><strong draft="">[FO_RS_MACsec_00028]</strong> <strong>Support of AES ciphers with 256 bits of key length</strong></p><p><strong draft="">[FO_RS_MACsec_00029]</strong> <strong>Support of Key Encryption Key (KEK)</strong></p><p><strong draft="">[FO_RS_MACsec_00030]</strong> <strong>Support of Integrity Check Value Key (ICK)</strong></p><p><strong draft="">[FO_RS_MACsec_00031]</strong> <strong>Support of Key Derivation Function (KDF)</strong></p><p><strong draft="">[FO_RS_MACsec_00032]</strong> <strong>List of minimal supported cipher suites</strong></p><p><strong draft="">[FO_RS_MACsec_00033]</strong> <strong>Validation function for ICVs</strong></p><p><strong draft="">[FO_RS_MACsec_00034]</strong> <strong>Generation function for ICVs</strong></p><p><strong draft="">[FO_RS_MACsec_00035]</strong><strong>Key Handling with combined HSM and MACsec functionality</strong></p></blockquote><h3 id="426-requirements-for-macsec-capable-hardware"><a class="anchor" href="#426-requirements-for-macsec-capable-hardware">#</a> <strong>4.2.6</strong> <strong>Requirements for MACsec capable hardware</strong></h3><blockquote><p><strong draft="">[FO_RS_MACsec_00036]</strong> <strong>Interframe gap configuration of Ethernet controller</strong></p></blockquote><h3 id="427-additions-to-standards"><a class="anchor" href="#427-additions-to-standards">#</a> <strong>4.2.7</strong> <strong>Additions to Standards</strong></h3><blockquote><p><strong><span draft="">FO_RS_MACsec_00037</span> MACsec participants per link</strong></p><p><strong draft="">[FO_RS_MACsec_00038]</strong> <strong>MKA SC establishment retry phase</strong></p><p><strong draft="">[FO_RS_MACsec_00039]</strong> <strong>MKA rekey conditions</strong></p></blockquote><hr><h1 id="六-ieee1722"><a class="anchor" href="#六-ieee1722">#</a> 六、IEEE1722</h1><h1 id="4-requirements-specification-3"><a class="anchor" href="#4-requirements-specification-3">#</a> <strong>4 Requirements Specification</strong></h1><blockquote><p>This chapter describes all requirements driving the work to define the FO_RS_IEEE1722.</p></blockquote><h2 id="41-functional-overview-3"><a class="anchor" href="#41-functional-overview-3">#</a> <strong>4.1</strong> <strong>Functional Overview</strong></h2><blockquote><p>IEEE specify a transport protocol for time-senstive applications in a bridged local area network (see [1, IEEE Std 1722-2016]). IEEE1722 streams transport data between stream data provider and 1 or multiple stream data consumers.</p></blockquote><p>IEEE 为桥接局域网中的时间敏感应用程序指定了一种传输协议 (见 [1, IEEE Std 1722-2016])。IEEE1722 流在流数据提供者和 1 个或多个流数据消费者之间传输数据。</p><blockquote><p>IEEE1722 streams carry among others a so-called "AVTP presentation time". The AVTP presentation time enables the possibilities to handle data synchronously across a local area network at several end nodes which receive the data via an IEEE1722 stream.</p></blockquote><p>IEEE 1722 流包括所谓的 “AVTP 呈现时间”。AVTP 呈现时间使得在通过 IEEE 1722 流的几个端点接收数据的局域网中同步处理数据成为可能。</p><blockquote><p>The IEEE1722 transport protocol support several AVTP subtypes to cover different use cases,e.g. :</p><ul><li>audio and video streaming</li><li>distribution of a generated clock rate of a so-called media clock</li><li>encapsulation of bus frames (e.g. CAN frames, LIN frames) and transport via a IEEE1722 stream across the network</li></ul></blockquote><p>IEEE1722 传输协议支持多个 AVTP 亚型以涵盖不同的用例，例如:</p><ul><li>音频和视频流</li><li>分配所谓的媒体时钟生成的时钟速率</li><li>封装总线帧 (例如 CAN 帧、LIN 帧) 并通过 IEEE1722 流在网络上传输</li></ul><blockquote><p>This specification contains requirements to support handling of IEEE1722 streams in classic and adaptive platform.</p></blockquote><p>此规范包含支持在经典平台和自适应平台中处理 IEEE1722 流的要求。</p><h2 id="42-functional-requirements-3"><a class="anchor" href="#42-functional-requirements-3">#</a> <strong>4.2</strong> <strong>Functional Requirements</strong></h2><blockquote><p><strong>[FO_RS_IEEE1722_00001] IEEE1722Tp module APIs for IEEE1722 streams</strong></p><p><strong>[FO_RS_IEEE1722_00002] IEEE1722Tp module handling of IEEE1722 streams</strong></p><p><strong>[FO_RS_IEEE1722_00003] IEEE1722Tp module access to synchronized global time</strong></p><p><strong>[FO_RS_IEEE1722_00004] IEEE1722Tp module media clock handling</strong></p><p><strong>[FO_RS_IEEE1722_00005] IEEE1722Tp module stream activation and deactivation</strong></p><p><strong>[FO_RS_IEEE1722_00006] IEEE1722Tp module immediate and deferred transmission request</strong></p><p><strong>[FO_RS_IEEE1722_00007] IEEE1722Tp module immediate and deferred reception processing</strong></p><p><strong>[FO_RS_IEEE1722_00008] IEEE1722Tp module encaspulates bus frames</strong></p><p><strong>[FO_RS_IEEE1722_00009] IEEE1722Tp module collecting bus frames for transport</strong></p><p><strong>[FO_RS_IEEE1722_00011] IEEE1722Tp module bus frame forwarding</strong></p><p><strong>[FO_RS_IEEE1722_00012] IEEE1722Tp module bus frame filtering</strong></p></blockquote><h2 id="43-non-functional-requirements-2"><a class="anchor" href="#43-non-functional-requirements-2">#</a> <strong>4.3</strong> <strong>Non-Functional Requirements</strong></h2><blockquote><p><strong>[FO_RS_IEEE1722_00013] IEEE1722Tp module definition of IEEE1722 streaming</strong></p><p><strong>[FO_RS_IEEE1722_00014] IEEE1722Tp module support of IEEE1722 stream properties</strong></p><p><strong>[FO_RS_IEEE1722_00015] IEEE1722Tp module support of IEEE1722 AVTP stream data subtypes</strong></p></blockquote><hr><h1 id="七-debugtraceprofile"><a class="anchor" href="#七-debugtraceprofile">#</a> 七、DebugTraceProfile</h1><h1 id="1-scope-of-document-4"><a class="anchor" href="#1-scope-of-document-4">#</a> <strong>1 Scope of Document</strong></h1><blockquote><p>Debugging and tracing enables efficient development, integration, optimization and verification of ECU software. For analyzing several aspects - especially timing aspects - it becomes essential to link the debugging and tracing data to the scheduling of an ECU.</p></blockquote><p>调试和跟踪使 ECU 软件的开发、集成、优化和验证更加高效。为了分析几个方面 -- 特别是时间方面 -- 将调试和跟踪数据与 ECU 的调度联系起来变得至关重要。</p><blockquote><p>Knowledge about tasks, interrupts and runnables, in other words: awareness of the operating system (“OS awareness”), is required.</p></blockquote><p>对于任务、中断和可运行的知识，换言之：操作系统的意识 (“OS 意识”) 是必需的。</p><blockquote><p>A good interaction of the tool chain provides complete round-trip engineering from model down to hardware and back - covering several software levels and several phases of the V-model.</p></blockquote><p>工具链的良好交互性提供了从模型到硬件和返回的完整的往返工程 -- 涵盖 V 模型的多个软件级别和多个阶段。</p><blockquote><p>The objective of ARTI (“AUTOSAR Run-Time Interface”) is an interface description, that allows debugging and tracing of AUTOSAR systems with a flexible awareness supporting different views, such as OS, BSW, RTE, model, user-data and user-defined.</p></blockquote><p>ARTI (“AUTOSAR 运行时接口”) 的目标是接口描述，它允许对 AUTOSAR 系统进行调试和跟踪，具有灵活的意识支持不同的视图，例如 OS、BSW、RTE、模型、用户数据和用户定义。</p><blockquote><p>In particular, the interface shall enable tools to perform:</p><ul><li>Debugging</li><li>Tracing</li><li>Timing Measurement</li><li>Profiling</li></ul></blockquote><p>特别是，该接口应使工具能够执行:</p><ul><li>调试</li><li>追踪</li><li>时间测量</li><li>概况介绍</li></ul><blockquote><p>The main focus of this requirements document is the format of the ARTI hooks and the exported ARTI description.</p></blockquote><p>此需求文档的主要重点是 ARTI 钩子的格式和导出的 ARTI 描述。</p><h1 id="4-requirements-specification-4"><a class="anchor" href="#4-requirements-specification-4">#</a> <strong>4 Requirements Specification</strong></h1><blockquote><p>This chapter describes all requirements driving the work to define ARTI.</p></blockquote><p>本章描述了推动定义 ARTI 的工作的所有需求。</p><h2 id="41-functional-overview-4"><a class="anchor" href="#41-functional-overview-4">#</a> <strong>4.1</strong> <strong>Functional Overview</strong></h2><blockquote><p>The tools that generate AUTOSAR modules (e.g. OS, RTE, etc.) have to emit internal information about this module. The information shall allow to debug and trace the behavior of this module.</p></blockquote><p>生成 AUTOSAR 模块的工具 (如 OS、RTE 等) 必须发出关于该模块的内部信息。该信息应允许调试和跟踪该模块的行为。</p><blockquote><p>Additional tools will collect all ARTI information of an ECU and allow selecting specific items to trace and create tracing hook files for a specific trace channel (e.g. internal buffer, hardware trace buffers, etc.).</p></blockquote><p>附加工具将收集 ECU 的所有 ARTI 信息，并允许选择特定项目进行跟踪，并为特定跟踪通道 (例如内部缓冲区、硬件跟踪缓冲区等) 创建跟踪挂钩文件。</p><blockquote><p>The build environment creates the final application, which then can be used in the ECU. Debugging and tracing tools can read in the ARTI information and are “AUTOSAR” aware, giving additional debugging and tracing features to the developer.</p></blockquote><p>构建环境创建最终应用程序，然后可以在 ECU 中使用。调试和跟踪工具可以读取 ARTI 信息，并且 “AUTOSAR” 意识，为开发人员提供额外的调试和跟踪功能。</p><blockquote><p>ARTI is supposed to work with debug information created by the compilers. This means each module that supports ARTI needs to be compiled with debug information, and the ARTI information has to use the symbol names created by the compiler.</p></blockquote><p>ARTI 应该与编译器生成的调试信息一起工作。这意味着每个支持 ARTI 的模块都需要使用调试信息编译，ARTI 信息必须使用编译器创建的符号名称。</p><blockquote><p>ARTI introduces hooks. In order to use them, they shall be incorporated into the module’s code. Either they are put therein statically, or they have to be configured.</p></blockquote><p>ARTI 引入了钩子。为了使用它们，它们应该被纳入到模块的代码中。它们可以静态地放在模块中，也可以被配置。</p><blockquote><p>ARTI consists of these functional elements:</p><ul><li>ARTI module description</li><li>The “ARTI Module Description” is emitted as an ARXML file, standardized by the ARTI Template.</li><li>ARTI hook implementations</li><li>The ARTI hooks are implemented within the AUTOSAR module’s source code.</li></ul></blockquote><p>ARTI 由以下功能要素组成:</p><ul><li>ARTI 模块描述<br>“ARTI 模块描述” 作为一个 ARXML 文件发出，由 ARTI 模板标准化。</li><li>ARTI 钩子实现<br>ARTI 钩子是在 AUTOSAR 模块的源代码中实现的。</li></ul><h2 id="42-functional-requirements-on-arti-template"><a class="anchor" href="#42-functional-requirements-on-arti-template">#</a> <strong>4.2</strong> <strong>Functional Requirements on ARTI Template</strong></h2><blockquote><p>The requirements in this section all concern how the ARTI template shall be defined.</p></blockquote><p>本节中的要求都涉及如何定义 ARTI 模板。</p><blockquote><p><strong>[RS_ARTIFO_00001] The ARTI Description shall be the root for the whole ARTI information of an ECU</strong></p><p><strong>[RS_ARTIFO_00002] The ARTI Description shall support generic objects</strong></p><p><strong>[RS_ARTIFO_00003] The ARTI Description shall support a class definition of a generic object</strong></p><p><strong>[RS_ARTIFO_00004] The ARTI Description shall support an instance definition of a generic object</strong></p><p><strong>[RS_ARTIFO_00005] The ARTI Description shall support expressions to evaluate a parameter value</strong></p><p><strong>[RS_ARTIFO_00006] The ARTI Description shall support constants used by object parameters</strong></p><p><strong>[RS_ARTIFO_00007] The ARTI Description shall support parameter maps</strong></p></blockquote><h2 id="43-functional-requirements-on-arti-description"><a class="anchor" href="#43-functional-requirements-on-arti-description">#</a> <strong>4.3</strong> <strong>Functional Requirements on ARTI Description</strong></h2><blockquote><p><strong>[RS_ARTIFO_00008] The ARTI description shall follow the ARTI Template.</strong></p><p><strong>[RS_ARTIFO_00009] The ARTI description shall include all class definitions of generic objects.</strong></p><p><strong>[RS_ARTIFO_00010] The ARTI description shall include all instance definitions of generic objects.</strong></p><p><strong>[RS_ARTIFO_00011] The ARTI description shall include all expression definitions to evaluate parameter values.</strong></p><p><strong>[RS_ARTIFO_00012] The ARTI description shall include all constant definitions used by parameters.</strong></p><p><strong>[RS_ARTIFO_00013] The ARTI description shall include all parameter maps used by parameters.</strong></p></blockquote><h2 id="44-functional-requirements-on-arti-hooks"><a class="anchor" href="#44-functional-requirements-on-arti-hooks">#</a> <strong>4.4</strong> <strong>Functional Requirements on ARTI Hooks</strong></h2><blockquote><p><strong>[RS_ARTIFO_00014] ARTI Hooks shall be implemented with minimal intrusion</strong></p><p><strong>[RS_ARTIFO_00015] ARTI Hooks shall follow a fixed format</strong></p><p><strong>[RS_ARTIFO_00016] ARTI Hooks shall provide information about the calling context</strong></p><p><strong>[RS_ARTIFO_00017] ARTI Hooks shall provide the name of the class they belong to</strong></p><p><strong>[RS_ARTIFO_00018] ARTI Hooks shall provide the name of the event</strong></p><p><strong>[RS_ARTIFO_00019] ARTI Hooks shall provide parameters for the event</strong></p></blockquote><h2 id="45-non-functional-requirements-qualities"><a class="anchor" href="#45-non-functional-requirements-qualities">#</a> <strong>4.5</strong> <strong>Non-Functional Requirements (Qualities)</strong></h2><div class="tags"><a href="/tags/AUTOSAR/" rel="tag"><i class="ic i-tag"></i> AUTOSAR</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2025-02-10 22:41:47" itemprop="dateModified" datetime="2025-02-10T22:41:47+08:00">2025-02-10</time> </span><span id="archives/e0c2534f.html" class="item leancloud_visitors" data-flag-title="小柴带你学AutoSar系列三、标准和规范篇（5）CommunicationManagement" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="flechazo 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="flechazo 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="flechazo 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>flechazo <i class="ic i-at"><em>@</em></i>我在人间贩卖黄昏，只为收集世间温柔遇见你.</li><li class="link"><strong>本文链接：</strong> <a href="https://flechazoclf.github.io/FlechazoCLF.github.io/archives/e0c2534f.html" title="小柴带你学AutoSar系列三、标准和规范篇（5）CommunicationManagement">https://flechazoclf.github.io/FlechazoCLF.github.io/archives/e0c2534f.html</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/archives/a3fde49a.html" itemprop="url" rel="prev" data-background-image="/archives/a3fde49a.html../../../wallpaper/5.png" title="职场的一些经验之谈木雁之间"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 自我提升</span><h3>职场的一些经验之谈木雁之间</h3></a></div><div class="item right"><a href="/archives/b20010d9.html" itemprop="url" rel="next" data-background-image="/archives/b20010d9.html../../../wallpaper/3.png" title="小柴带你学AutoSar系列一、基础知识篇（1）概念和目标"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> AUTOSAR</span><h3>小柴带你学AutoSar系列一、基础知识篇（1）概念和目标</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E6%9F%B4%E5%B8%A6%E4%BD%A0%E5%AD%A6autosar%E7%B3%BB%E5%88%97%E4%B8%89-%E6%A0%87%E5%87%86%E5%92%8C%E8%A7%84%E8%8C%83%E7%AF%875communicationmanagement"><span class="toc-number">1.</span> <span class="toc-text">小柴带你学 AutoSar 系列三、标准和规范篇（5）CommunicationManagement</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80-networkmanagement"><span class="toc-number">2.</span> <span class="toc-text">一、NetworkManagement</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-scope-of-document"><span class="toc-number">3.</span> <span class="toc-text">1 Scope of Document</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-use-cases"><span class="toc-number">4.</span> <span class="toc-text">4 Use Cases</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-requirements-specification"><span class="toc-number">5.</span> <span class="toc-text">5 Requirements Specification</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#51-functional-requirements"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 Functional Requirements</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#511-configuration"><span class="toc-number">5.1.1.</span> <span class="toc-text">5.1.1 Configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#512-initialization"><span class="toc-number">5.1.2.</span> <span class="toc-text">5.1.2 Initialization</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#513-normal-operation"><span class="toc-number">5.1.3.</span> <span class="toc-text">5.1.3 Normal Operation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#514-fault-operation"><span class="toc-number">5.1.4.</span> <span class="toc-text">5.1.4 Fault Operation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#515-nm-coordination"><span class="toc-number">5.1.5.</span> <span class="toc-text">5.1.5 Nm Coordination</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#516-partial-networking"><span class="toc-number">5.1.6.</span> <span class="toc-text">5.1.6 Partial Networking</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#52-non-functional-requirements"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 Non-Functional Requirements</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#521-layout-requirements"><span class="toc-number">5.2.1.</span> <span class="toc-text">5.2.1 Layout Requirements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#522-timing-requirements"><span class="toc-number">5.2.2.</span> <span class="toc-text">5.2.2 Timing Requirements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#523-resource-usage"><span class="toc-number">5.2.3.</span> <span class="toc-text">5.2.3 Resource Usage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#524-hardware-independency"><span class="toc-number">5.2.4.</span> <span class="toc-text">5.2.4 Hardware independency</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C-e2e"><span class="toc-number">6.</span> <span class="toc-text">二、E2E</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-scope-of-this-document"><span class="toc-number">7.</span> <span class="toc-text">1 Scope of this document</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-functional-overview"><span class="toc-number">8.</span> <span class="toc-text">4 Functional Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-functional-safety-and-communication"><span class="toc-number">8.1.</span> <span class="toc-text">4.1 Functional safety and communication</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-sources-of-faults-in-e2e-communication"><span class="toc-number">8.2.</span> <span class="toc-text">4.2 Sources of faults in E2E communication</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1software-faults"><span class="toc-number">8.2.1.</span> <span class="toc-text">1.Software faults</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2random-hardware-faults"><span class="toc-number">8.2.2.</span> <span class="toc-text">2.Random hardware faults</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3transient-faults"><span class="toc-number">8.2.3.</span> <span class="toc-text">3.Transient faults</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-safe-end-to-end-communication-in-autosar"><span class="toc-number">8.3.</span> <span class="toc-text">4.3 Safe End-to-End communication in AUTOSAR</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#431-e2e-protection-concepts"><span class="toc-number">8.3.1.</span> <span class="toc-text">4.3.1 E2E protection concepts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#432-integrity-of-a-communication-channel"><span class="toc-number">8.3.2.</span> <span class="toc-text">4.3.2 Integrity of a communication channel</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-requirements-specification"><span class="toc-number">9.</span> <span class="toc-text">6 Requirements Specification</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#61-functional-requirements"><span class="toc-number">9.1.</span> <span class="toc-text">6.1 Functional Requirements</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#supported-communication-models-and-features"><span class="toc-number">9.1.1.</span> <span class="toc-text">Supported communication models and features</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#e2e-detected-faults"><span class="toc-number">9.1.2.</span> <span class="toc-text">E2E detected faults</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#e2e-algorithms-and-profiles"><span class="toc-number">9.1.3.</span> <span class="toc-text">E2E Algorithms and Profiles</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#use-case"><span class="toc-number">9.1.4.</span> <span class="toc-text">Use Case:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#62-safety-applicability-and-overall-safety-assumptions"><span class="toc-number">9.2.</span> <span class="toc-text">6.2 Safety applicability and overall safety assumptions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#63-e2e-transformer"><span class="toc-number">9.3.</span> <span class="toc-text">6.3 E2E Transformer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#64-e2e-library"><span class="toc-number">9.4.</span> <span class="toc-text">6.4 E2E Library</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89-logandtrace"><span class="toc-number">10.</span> <span class="toc-text">三、LogAndTrace</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-scope-of-document-2"><span class="toc-number">11.</span> <span class="toc-text">1 Scope of Document</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-requirements-specification"><span class="toc-number">12.</span> <span class="toc-text">4 Requirements Specification</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-functional-overview"><span class="toc-number">12.1.</span> <span class="toc-text">4.1 Functional Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-functional-requirements"><span class="toc-number">12.2.</span> <span class="toc-text">4.2 Functional Requirements</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#421-log-and-trace-interfaces"><span class="toc-number">12.2.1.</span> <span class="toc-text">4.2.1 Log and trace interfaces</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#422-format-of-log-and-trace-message"><span class="toc-number">12.2.2.</span> <span class="toc-text">4.2.2 Format of log and trace message</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#423-transport-interfaces"><span class="toc-number">12.2.3.</span> <span class="toc-text">4.2.3 Transport interfaces</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#424-operational-function"><span class="toc-number">12.2.4.</span> <span class="toc-text">4.2.4 Operational function</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-non-functional-requirements"><span class="toc-number">12.3.</span> <span class="toc-text">4.3 Non-Functional Requirements</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B-timesensitivenetworkfeatures"><span class="toc-number">13.</span> <span class="toc-text">四、TimeSensitiveNetworkFeatures</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-introduction"><span class="toc-number">14.</span> <span class="toc-text">1 Introduction</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-objectives"><span class="toc-number">14.1.</span> <span class="toc-text">1.1 Objectives</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-time-sensitive-network-in-autosar"><span class="toc-number">15.</span> <span class="toc-text">4 Time Sensitive Network in AUTOSAR</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-constraints-and-assumptions"><span class="toc-number">15.1.</span> <span class="toc-text">4.1 Constraints and Assumptions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-overview"><span class="toc-number">15.2.</span> <span class="toc-text">4.2 Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#421-ieee-8021as"><span class="toc-number">15.2.1.</span> <span class="toc-text">4.2.1 IEEE 802.1AS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#422-ieee-8021qav"><span class="toc-number">15.2.2.</span> <span class="toc-text">4.2.2 IEEE 802.1Qav</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#423-ieee-8021qbv"><span class="toc-number">15.2.3.</span> <span class="toc-text">4.2.3 IEEE 802.1Qbv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#424-ieee-8021qcc"><span class="toc-number">15.2.4.</span> <span class="toc-text">4.2.4 IEEE 802.1Qcc</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-usage-of-shapers-in-the-network"><span class="toc-number">15.3.</span> <span class="toc-text">4.3 Usage of Shapers in the Network</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#431-asynchronous-traffic-shaping"><span class="toc-number">15.3.1.</span> <span class="toc-text">4.3.1 Asynchronous Traffic Shaping</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#432-credit-based-shaper"><span class="toc-number">15.3.2.</span> <span class="toc-text">4.3.2 Credit Based Shaper</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#44-ensure-accuracy-of-time-synchronization"><span class="toc-number">15.4.</span> <span class="toc-text">4.4 Ensure Accuracy of Time Synchronization</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#45-measurement-of-the-time-synchronization-quality-accuracy"><span class="toc-number">15.5.</span> <span class="toc-text">4.5 Measurement of the Time Synchronization Quality (Accuracy)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94-macsec"><span class="toc-number">16.</span> <span class="toc-text">五、MACsec</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-scope-of-document-3"><span class="toc-number">17.</span> <span class="toc-text">1 Scope of Document</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-requirements-specification-2"><span class="toc-number">18.</span> <span class="toc-text">4 Requirements Specification</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-functional-overview-2"><span class="toc-number">18.1.</span> <span class="toc-text">4.1 Functional Overview</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#411-motivation"><span class="toc-number">18.1.1.</span> <span class="toc-text">4.1.1 Motivation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#412-functional-elements"><span class="toc-number">18.1.2.</span> <span class="toc-text">4.1.2 Functional elements</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-functional-requirements-2"><span class="toc-number">18.2.</span> <span class="toc-text">4.2 Functional Requirements</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#421-standards-to-support"><span class="toc-number">18.2.1.</span> <span class="toc-text">4.2.1 Standards to support</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#422-common-requirements"><span class="toc-number">18.2.2.</span> <span class="toc-text">4.2.2 Common Requirements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#423-requirements-on-macsec-protocol"><span class="toc-number">18.2.3.</span> <span class="toc-text">4.2.3 Requirements on MACsec Protocol</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#424-requirements-on-mka-protocol"><span class="toc-number">18.2.4.</span> <span class="toc-text">4.2.4 Requirements on MKA Protocol</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#425-cryptography-for-macsec-and-mka"><span class="toc-number">18.2.5.</span> <span class="toc-text">4.2.5 Cryptography for MACsec and MKA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#426-requirements-for-macsec-capable-hardware"><span class="toc-number">18.2.6.</span> <span class="toc-text">4.2.6 Requirements for MACsec capable hardware</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#427-additions-to-standards"><span class="toc-number">18.2.7.</span> <span class="toc-text">4.2.7 Additions to Standards</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD-ieee1722"><span class="toc-number">19.</span> <span class="toc-text">六、IEEE1722</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-requirements-specification-3"><span class="toc-number">20.</span> <span class="toc-text">4 Requirements Specification</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-functional-overview-3"><span class="toc-number">20.1.</span> <span class="toc-text">4.1 Functional Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-functional-requirements-3"><span class="toc-number">20.2.</span> <span class="toc-text">4.2 Functional Requirements</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-non-functional-requirements-2"><span class="toc-number">20.3.</span> <span class="toc-text">4.3 Non-Functional Requirements</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83-debugtraceprofile"><span class="toc-number">21.</span> <span class="toc-text">七、DebugTraceProfile</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-scope-of-document-4"><span class="toc-number">22.</span> <span class="toc-text">1 Scope of Document</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-requirements-specification-4"><span class="toc-number">23.</span> <span class="toc-text">4 Requirements Specification</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-functional-overview-4"><span class="toc-number">23.1.</span> <span class="toc-text">4.1 Functional Overview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-functional-requirements-on-arti-template"><span class="toc-number">23.2.</span> <span class="toc-text">4.2 Functional Requirements on ARTI Template</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-functional-requirements-on-arti-description"><span class="toc-number">23.3.</span> <span class="toc-text">4.3 Functional Requirements on ARTI Description</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#44-functional-requirements-on-arti-hooks"><span class="toc-number">23.4.</span> <span class="toc-text">4.4 Functional Requirements on ARTI Hooks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#45-non-functional-requirements-qualities"><span class="toc-number">23.5.</span> <span class="toc-text">4.5 Non-Functional Requirements (Qualities)</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/archives/dfcb5141.html" rel="bookmark" title="LD文件在AUTOSAR工程中的作用和语法解析">LD文件在AUTOSAR工程中的作用和语法解析</a></li><li><a href="/archives/cbed58a6.html" rel="bookmark" title="小柴带你学AutoSar总目录">小柴带你学AutoSar总目录</a></li><li><a href="/archives/b20010d9.html" rel="bookmark" title="小柴带你学AutoSar系列一、基础知识篇（1）概念和目标">小柴带你学AutoSar系列一、基础知识篇（1）概念和目标</a></li><li class="active"><a href="/archives/e0c2534f.html" rel="bookmark" title="小柴带你学AutoSar系列三、标准和规范篇（5）CommunicationManagement">小柴带你学AutoSar系列三、标准和规范篇（5）CommunicationManagement</a></li><li><a href="/archives/e8a5cc27.html" rel="bookmark" title="小柴带你学AutoSar系列一、基础知识篇（2）AutoSar架构">小柴带你学AutoSar系列一、基础知识篇（2）AutoSar架构</a></li><li><a href="/archives/e8bc299.html" rel="bookmark" title="小柴带你学AutoSar系列一、基础知识篇（5）makefile基础">小柴带你学AutoSar系列一、基础知识篇（5）makefile基础</a></li><li><a href="/archives/5e71c9a6.html" rel="bookmark" title="小柴带你学AutoSar系列一、基础知识篇（3）C语言基础">小柴带你学AutoSar系列一、基础知识篇（3）C语言基础</a></li><li><a href="/archives/7cac95ec.html" rel="bookmark" title="小柴带你学AutoSar系列一、基础知识篇（4）编译">小柴带你学AutoSar系列一、基础知识篇（4）编译</a></li><li><a href="/archives/3c7f112.html" rel="bookmark" title="小柴带你学AutoSar系列一、基础知识篇（6）车规级MCU入门RH850">小柴带你学AutoSar系列一、基础知识篇（6）车规级MCU入门RH850</a></li><li><a href="/archives/3f4a19e2.html" rel="bookmark" title="小柴带你学AutoSar系列一、基础知识篇（7）术语">小柴带你学AutoSar系列一、基础知识篇（7）术语</a></li><li><a href="/archives/962e9003.html" rel="bookmark" title="小柴带你学习AutoSar系列三、标准和规范篇（1）General">小柴带你学习AutoSar系列三、标准和规范篇（1）General</a></li><li><a href="/archives/db4ff6ff.html" rel="bookmark" title="小柴带你学习AutoSar系列三、标准和规范篇（2）BSWGeneral">小柴带你学习AutoSar系列三、标准和规范篇（2）BSWGeneral</a></li><li><a href="/archives/c9ca48bd.html" rel="bookmark" title="小柴带你学习AutoSar系列三、标准和规范篇（3）ModeManagement">小柴带你学习AutoSar系列三、标准和规范篇（3）ModeManagement</a></li><li><a href="/archives/fd244a42.html" rel="bookmark" title="小柴带你学AutoSar系列三、标准和规范篇（4）RTE">小柴带你学AutoSar系列三、标准和规范篇（4）RTE</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="flechazo" data-src="/images/avatar.jpg"><p class="name" itemprop="name">flechazo</p><div class="description" itemprop="description">我在人间贩卖星光</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">192</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">44</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">41</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0Fnb25pMzdD" title="https://github.com/Agoni37C"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9qaXVfc2hlbmc=" title="https://www.zhihu.com/people/jiu_sheng"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvcGxheWxpc3Q/aWQ9NzE3NTI4NzIwNQ==" title="https://music.163.com/#/playlist?id=7175287205"><i class="ic i-cloud-music"></i></span> <span class="exturl item weixin" data-url="aHR0cDovL21wLndlaXhpbi5xcS5jb20vbXAvaG9tZXBhZ2U/X19iaXo9TXpBeE9ETTJOVFEwTnc9PSZoaWQ9MiZzbj05ZThkZGVkOGU3MTgxYTA4YTA1MjFiOTQ2MjIyY2Q3MiZzY2VuZT0xOCN3ZWNoYXRfcmVkaXJlY3Q=" title="http://mp.weixin.qq.com/mp/homepage?__biz=MzAxODM2NTQ0Nw==&amp;hid=2&amp;sn=9e8dded8e7181a08a0521b946222cd72&amp;scene=18#wechat_redirect"><i class="ic i-address-card"></i></span> <span class="exturl item bilibili" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vNDQxODc1ODQ0P3NwbV9pZF9mcm9tPTMzMy4xMDA3LjAuMA==" title="https://space.bilibili.com/441875844?spm_id_from=333.1007.0.0"><i class="ic i-bilibili"></i></span></div><ul class="menu"><li class="item"><span class="exturl" data-url="aHR0cDovLzEyMS4zNy4xNi4zMDo4MDAwLw=="><i class="ic i-home"></i>首页</span></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>小伙伴们</a></li><li class="item"><span class="exturl" data-url="aHR0cDovLzEyMS4zNy4xNi4zMDo4MDAxLw=="><i class="ic i-magic"></i>导航页🚀</span></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>小天地🍼</a><ul class="submenu"><li class="item"><a href="/broken-thoughts/" rel="section"><i class="ic i-heart"></i>碎碎念</a></li><li class="item"><span class="exturl" data-url="aHR0cDovLzEyMS4zNy4xNi4zMDo4MDAyLw=="><i class="ic i-heart"></i>云小🎪盘</span></li><li class="item"><a href="/mypages/Videoparse/" rel="section"><i class="ic i-heart"></i>视频解析</a></li><li class="item"><a href="/movies/" rel="section"><i class="ic i-heart"></i>影集</a></li><li class="item"><span class="exturl" data-url="aHR0cDovLzEyMS4zNy4xNi4zMDo4MDA5Lw=="><i class="ic i-heart"></i>游戏🎮小站</span></li><li class="item"><span class="exturl" data-url="aHR0cDovLzEyMS4zNy4xNi4zMDo4MDA2Lw=="><i class="ic i-heart"></i>动感天地🎶</span></li><li class="item"><span class="exturl" data-url="aHR0cDovLzEyMS4zNy4xNi4zMDo4MDAzLw=="><i class="ic i-heart"></i>4k壁纸❄</span></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>有趣单页</a><ul class="submenu"><li class="item"><a href="/mypageslayout/barrage/" rel="section"><i class="ic i-list-alt"></i>弹幕墙</a></li><li class="item"><a href="/mypages/crossing-the-cliff/" rel="section"><i class="ic i-th"></i>圣诞老人过桥</a></li><li class="item"><a href="/mypages/eat/" rel="section"><i class="ic i-tags"></i>今天吃什么</a></li><li class="item"><a href="/mypages/clock/" rel="section"><i class="ic i-list-alt"></i>好看的闹钟</a></li><li class="item"><a href="/mypages/QQpage/" rel="section"><i class="ic i-list-alt"></i>QQ展示页</a></li><li class="item"><a href="/mypages/jianli/" rel="section"><i class="ic i-th"></i>简历</a></li><li class="item"><a href="/mypages/love/" rel="section"><i class="ic i-tags"></i>执子之手</a></li><li class="item"><a href="/mypages/tiangou/" rel="section"><i class="ic i-list-alt"></i>舔狗语录</a></li><li class="item"><a href="/mypages/washing/" rel="section"><i class="ic i-th"></i>洗衣机</a></li><li class="item"><a href="/mypages/todolist/" rel="section"><i class="ic i-tags"></i>行动清单</a></li><li class="item"><a href="/mypages/yindao2/" rel="section"><i class="ic i-list-alt"></i>引导页</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/archives/a3fde49a.html" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/archives/b20010d9.html" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/english/" title="分类于 english">english</a> <i class="ic i-angle-right"></i> <a href="/categories/english/%E6%97%A5%E5%B8%B8%E8%8B%B1%E8%AF%AD%E5%B0%8F%E7%9F%A5%E8%AF%86/" title="分类于 日常英语小知识">日常英语小知识</a></div><span><a href="/archives/4cfc2304.html" title="🥡英语-打脸用英语怎么说">🥡英语-打脸用英语怎么说</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/technique/" title="分类于 技术教程🎃">技术教程🎃</a> <i class="ic i-angle-right"></i> <a href="/categories/technique/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%B8%88/" title="分类于 嵌入式系统设计师">嵌入式系统设计师</a></div><span><a href="/archives/c3251f5b.html" title="小柴冲刺软考中级嵌入式系统设计师系列三、嵌入式硬件设计（1）嵌入式系统电源管理">小柴冲刺软考中级嵌入式系统设计师系列三、嵌入式硬件设计（1）嵌入式系统电源管理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/technique/" title="分类于 技术教程🎃">技术教程🎃</a> <i class="ic i-angle-right"></i> <a href="/categories/technique/QT/" title="分类于 QT">QT</a></div><span><a href="/archives/85c52c40.html" title="串口通信中的接收与发送队列处理大数据">串口通信中的接收与发送队列处理大数据</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/technique/" title="分类于 技术教程🎃">技术教程🎃</a> <i class="ic i-angle-right"></i> <a href="/categories/technique/%E5%B5%8C%E5%85%A5%E5%BC%8F/" title="分类于 嵌入式">嵌入式</a></div><span><a href="/archives/35424583.html" title="小柴冲刺软考中级嵌入式系统设计师系列二、嵌入式系统硬件基础知识（2）嵌入式微处理器基础">小柴冲刺软考中级嵌入式系统设计师系列二、嵌入式系统硬件基础知识（2）嵌入式微处理器基础</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/blog/" title="分类于 blog🌮">blog🌮</a> <i class="ic i-angle-right"></i> <a href="/categories/blog/hexo/" title="分类于 hexo">hexo</a></div><span><a href="/archives/bbdf8276.html" title="🥓Hexo-文章加密-Shoka-Hexo🥓">🥓Hexo-文章加密-Shoka-Hexo🥓</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/technique/" title="分类于 技术教程🎃">技术教程🎃</a> <i class="ic i-angle-right"></i> <a href="/categories/technique/QT/" title="分类于 QT">QT</a></div><span><a href="/archives/e52cfcec.html" title="QT读写word文档">QT读写word文档</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/technique/" title="分类于 技术教程🎃">技术教程🎃</a> <i class="ic i-angle-right"></i> <a href="/categories/technique/%E5%B5%8C%E5%85%A5%E5%BC%8F/" title="分类于 嵌入式">嵌入式</a></div><span><a href="/archives/7d13c9aa.html" title="嵌入式软件开发知识总结C语言篇">嵌入式软件开发知识总结C语言篇</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/technique/" title="分类于 技术教程🎃">技术教程🎃</a> <i class="ic i-angle-right"></i> <a href="/categories/technique/esp8266/" title="分类于 esp8266">esp8266</a></div><span><a href="/archives/4bef37d1.html" title="Arduino中没有ESP8266">Arduino中没有ESP8266</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/technique/" title="分类于 技术教程🎃">技术教程🎃</a> <i class="ic i-angle-right"></i> <a href="/categories/technique/%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E5%B8%88/" title="分类于 嵌入式系统设计师">嵌入式系统设计师</a></div><span><a href="/archives/c3251f5b.html" title="小柴冲刺软考中级嵌入式系统设计师系列三、嵌入式硬件设计（1）嵌入式系统电源管理">小柴冲刺软考中级嵌入式系统设计师系列三、嵌入式硬件设计（1）嵌入式系统电源管理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/technique/" title="分类于 技术教程🎃">技术教程🎃</a> <i class="ic i-angle-right"></i> <a href="/categories/technique/JAVA/" title="分类于 JAVA">JAVA</a></div><span><a href="/archives/3cff2463.html" title="⛄JAVA学习之路☃">⛄JAVA学习之路☃</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">© 2020 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">flechazo @ flechazo</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">906k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">13:44</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> &amp; Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config="" type="text/javascript">var LOCAL={path:"archives/e0c2534f.html",favicon:{show:"flechazo",hide:"(´Д｀)客官别走！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script type="text/javascript" charset="utf-8" src="/js/lazyload-plugin/lazyload.intersectionObserver.min.js"></script></body></html><!-- rebuild by hrmmi -->